const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/plotly-vendor-3GFWULd-.js","assets/react-vendor-ChGhYKyN.js","assets/mui-vendor-DPivwvYU.js"])))=>i.map(i=>d[i]);
import{r as I,j as u,G as ur,c as fr,a as pr}from"./react-vendor-ChGhYKyN.js";import{A as hr,C as mr,a as gr,R as yr,D as wt}from"./mui-vendor-DPivwvYU.js";import{f as bt,a as wr}from"./plotly-vendor-3GFWULd-.js";import{u as be,w as br,_ as tt,P as xr,a as Z,A as Er,H as De,T as H,F as Rr}from"./utils-vendor-CBIR_x-l.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function o(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(n){if(n.ep)return;n.ep=!0;const s=o(n);fetch(n.href,s)}})();function no(e,t){return function(){return e.apply(t,arguments)}}const{toString:Ar}=Object.prototype,{getPrototypeOf:ut}=Object,{iterator:Be,toStringTag:so}=Symbol,Ge=(e=>t=>{const o=Ar.call(t);return e[o]||(e[o]=o.slice(8,-1).toLowerCase())})(Object.create(null)),te=e=>(e=e.toLowerCase(),t=>Ge(t)===e),He=e=>t=>typeof t===e,{isArray:me}=Array,he=He("undefined");function Te(e){return e!==null&&!he(e)&&e.constructor!==null&&!he(e.constructor)&&Y(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const ao=te("ArrayBuffer");function Sr(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&ao(e.buffer),t}const vr=He("string"),Y=He("function"),io=He("number"),Ce=e=>e!==null&&typeof e=="object",Nr=e=>e===!0||e===!1,Le=e=>{if(Ge(e)!=="object")return!1;const t=ut(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(so in e)&&!(Be in e)},Tr=e=>{if(!Ce(e)||Te(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},Cr=te("Date"),kr=te("File"),Or=te("Blob"),Pr=te("FileList"),jr=e=>Ce(e)&&Y(e.pipe),Fr=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Y(e.append)&&((t=Ge(e))==="formdata"||t==="object"&&Y(e.toString)&&e.toString()==="[object FormData]"))},Ir=te("URLSearchParams"),[_r,Dr,Lr,Mr]=["ReadableStream","Request","Response","Headers"].map(te),Ur=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ke(e,t,{allOwnKeys:o=!1}={}){if(e===null||typeof e>"u")return;let r,n;if(typeof e!="object"&&(e=[e]),me(e))for(r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else{if(Te(e))return;const s=o?Object.getOwnPropertyNames(e):Object.keys(e),a=s.length;let i;for(r=0;r<a;r++)i=s[r],t.call(null,e[i],i,e)}}function co(e,t){if(Te(e))return null;t=t.toLowerCase();const o=Object.keys(e);let r=o.length,n;for(;r-- >0;)if(n=o[r],t===n.toLowerCase())return n;return null}const ae=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:globalThis,lo=e=>!he(e)&&e!==ae;function ot(){const{caseless:e,skipUndefined:t}=lo(this)&&this||{},o={},r=(n,s)=>{const a=e&&co(o,s)||s;Le(o[a])&&Le(n)?o[a]=ot(o[a],n):Le(n)?o[a]=ot({},n):me(n)?o[a]=n.slice():(!t||!he(n))&&(o[a]=n)};for(let n=0,s=arguments.length;n<s;n++)arguments[n]&&ke(arguments[n],r);return o}const $r=(e,t,o,{allOwnKeys:r}={})=>(ke(t,(n,s)=>{o&&Y(n)?e[s]=no(n,o):e[s]=n},{allOwnKeys:r}),e),qr=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),Br=(e,t,o,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),o&&Object.assign(e.prototype,o)},Gr=(e,t,o,r)=>{let n,s,a;const i={};if(t=t||{},e==null)return t;do{for(n=Object.getOwnPropertyNames(e),s=n.length;s-- >0;)a=n[s],(!r||r(a,e,t))&&!i[a]&&(t[a]=e[a],i[a]=!0);e=o!==!1&&ut(e)}while(e&&(!o||o(e,t))&&e!==Object.prototype);return t},Hr=(e,t,o)=>{e=String(e),(o===void 0||o>e.length)&&(o=e.length),o-=t.length;const r=e.indexOf(t,o);return r!==-1&&r===o},Wr=e=>{if(!e)return null;if(me(e))return e;let t=e.length;if(!io(t))return null;const o=new Array(t);for(;t-- >0;)o[t]=e[t];return o},Vr=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&ut(Uint8Array)),zr=(e,t)=>{const r=(e&&e[Be]).call(e);let n;for(;(n=r.next())&&!n.done;){const s=n.value;t.call(e,s[0],s[1])}},Kr=(e,t)=>{let o;const r=[];for(;(o=e.exec(t))!==null;)r.push(o);return r},Xr=te("HTMLFormElement"),Jr=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(o,r,n){return r.toUpperCase()+n}),xt=(({hasOwnProperty:e})=>(t,o)=>e.call(t,o))(Object.prototype),Yr=te("RegExp"),uo=(e,t)=>{const o=Object.getOwnPropertyDescriptors(e),r={};ke(o,(n,s)=>{let a;(a=t(n,s,e))!==!1&&(r[s]=a||n)}),Object.defineProperties(e,r)},Qr=e=>{uo(e,(t,o)=>{if(Y(e)&&["arguments","caller","callee"].indexOf(o)!==-1)return!1;const r=e[o];if(Y(r)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+o+"'")})}})},Zr=(e,t)=>{const o={},r=n=>{n.forEach(s=>{o[s]=!0})};return me(e)?r(e):r(String(e).split(t)),o},en=()=>{},tn=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function on(e){return!!(e&&Y(e.append)&&e[so]==="FormData"&&e[Be])}const rn=e=>{const t=new Array(10),o=(r,n)=>{if(Ce(r)){if(t.indexOf(r)>=0)return;if(Te(r))return r;if(!("toJSON"in r)){t[n]=r;const s=me(r)?[]:{};return ke(r,(a,i)=>{const d=o(a,n+1);!he(d)&&(s[i]=d)}),t[n]=void 0,s}}return r};return o(e,0)},nn=te("AsyncFunction"),sn=e=>e&&(Ce(e)||Y(e))&&Y(e.then)&&Y(e.catch),fo=((e,t)=>e?setImmediate:t?((o,r)=>(ae.addEventListener("message",({source:n,data:s})=>{n===ae&&s===o&&r.length&&r.shift()()},!1),n=>{r.push(n),ae.postMessage(o,"*")}))(`axios@${Math.random()}`,[]):o=>setTimeout(o))(typeof setImmediate=="function",Y(ae.postMessage)),an=typeof queueMicrotask<"u"?queueMicrotask.bind(ae):typeof process<"u"&&process.nextTick||fo,cn=e=>e!=null&&Y(e[Be]),g={isArray:me,isArrayBuffer:ao,isBuffer:Te,isFormData:Fr,isArrayBufferView:Sr,isString:vr,isNumber:io,isBoolean:Nr,isObject:Ce,isPlainObject:Le,isEmptyObject:Tr,isReadableStream:_r,isRequest:Dr,isResponse:Lr,isHeaders:Mr,isUndefined:he,isDate:Cr,isFile:kr,isBlob:Or,isRegExp:Yr,isFunction:Y,isStream:jr,isURLSearchParams:Ir,isTypedArray:Vr,isFileList:Pr,forEach:ke,merge:ot,extend:$r,trim:Ur,stripBOM:qr,inherits:Br,toFlatObject:Gr,kindOf:Ge,kindOfTest:te,endsWith:Hr,toArray:Wr,forEachEntry:zr,matchAll:Kr,isHTMLForm:Xr,hasOwnProperty:xt,hasOwnProp:xt,reduceDescriptors:uo,freezeMethods:Qr,toObjectSet:Zr,toCamelCase:Jr,noop:en,toFiniteNumber:tn,findKey:co,global:ae,isContextDefined:lo,isSpecCompliantForm:on,toJSONObject:rn,isAsyncFn:nn,isThenable:sn,setImmediate:fo,asap:an,isIterable:cn};function F(e,t,o,r,n){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),o&&(this.config=o),r&&(this.request=r),n&&(this.response=n,this.status=n.status?n.status:null)}g.inherits(F,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:g.toJSONObject(this.config),code:this.code,status:this.status}}});const po=F.prototype,ho={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{ho[e]={value:e}});Object.defineProperties(F,ho);Object.defineProperty(po,"isAxiosError",{value:!0});F.from=(e,t,o,r,n,s)=>{const a=Object.create(po);g.toFlatObject(e,a,function(l){return l!==Error.prototype},c=>c!=="isAxiosError");const i=e&&e.message?e.message:"Error",d=t==null&&e?e.code:t;return F.call(a,i,d,o,r,n),e&&a.cause==null&&Object.defineProperty(a,"cause",{value:e,configurable:!0}),a.name=e&&e.name||"Error",s&&Object.assign(a,s),a};const ln=null;function rt(e){return g.isPlainObject(e)||g.isArray(e)}function mo(e){return g.endsWith(e,"[]")?e.slice(0,-2):e}function Et(e,t,o){return e?e.concat(t).map(function(n,s){return n=mo(n),!o&&s?"["+n+"]":n}).join(o?".":""):t}function dn(e){return g.isArray(e)&&!e.some(rt)}const un=g.toFlatObject(g,{},null,function(t){return/^is[A-Z]/.test(t)});function We(e,t,o){if(!g.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,o=g.toFlatObject(o,{metaTokens:!0,dots:!1,indexes:!1},!1,function(b,x){return!g.isUndefined(x[b])});const r=o.metaTokens,n=o.visitor||l,s=o.dots,a=o.indexes,d=(o.Blob||typeof Blob<"u"&&Blob)&&g.isSpecCompliantForm(t);if(!g.isFunction(n))throw new TypeError("visitor must be a function");function c(m){if(m===null)return"";if(g.isDate(m))return m.toISOString();if(g.isBoolean(m))return m.toString();if(!d&&g.isBlob(m))throw new F("Blob is not supported. Use a Buffer instead.");return g.isArrayBuffer(m)||g.isTypedArray(m)?d&&typeof Blob=="function"?new Blob([m]):Buffer.from(m):m}function l(m,b,x){let A=m;if(m&&!x&&typeof m=="object"){if(g.endsWith(b,"{}"))b=r?b:b.slice(0,-2),m=JSON.stringify(m);else if(g.isArray(m)&&dn(m)||(g.isFileList(m)||g.endsWith(b,"[]"))&&(A=g.toArray(m)))return b=mo(b),A.forEach(function(E,y){!(g.isUndefined(E)||E===null)&&t.append(a===!0?Et([b],y,s):a===null?b:b+"[]",c(E))}),!1}return rt(m)?!0:(t.append(Et(x,b,s),c(m)),!1)}const f=[],p=Object.assign(un,{defaultVisitor:l,convertValue:c,isVisitable:rt});function h(m,b){if(!g.isUndefined(m)){if(f.indexOf(m)!==-1)throw Error("Circular reference detected in "+b.join("."));f.push(m),g.forEach(m,function(A,R){(!(g.isUndefined(A)||A===null)&&n.call(t,A,g.isString(R)?R.trim():R,b,p))===!0&&h(A,b?b.concat(R):[R])}),f.pop()}}if(!g.isObject(e))throw new TypeError("data must be an object");return h(e),t}function Rt(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function ft(e,t){this._pairs=[],e&&We(e,this,t)}const go=ft.prototype;go.append=function(t,o){this._pairs.push([t,o])};go.toString=function(t){const o=t?function(r){return t.call(this,r,Rt)}:Rt;return this._pairs.map(function(n){return o(n[0])+"="+o(n[1])},"").join("&")};function fn(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function yo(e,t,o){if(!t)return e;const r=o&&o.encode||fn;g.isFunction(o)&&(o={serialize:o});const n=o&&o.serialize;let s;if(n?s=n(t,o):s=g.isURLSearchParams(t)?t.toString():new ft(t,o).toString(r),s){const a=e.indexOf("#");a!==-1&&(e=e.slice(0,a)),e+=(e.indexOf("?")===-1?"?":"&")+s}return e}class At{constructor(){this.handlers=[]}use(t,o,r){return this.handlers.push({fulfilled:t,rejected:o,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){g.forEach(this.handlers,function(r){r!==null&&t(r)})}}const wo={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},pn=typeof URLSearchParams<"u"?URLSearchParams:ft,hn=typeof FormData<"u"?FormData:null,mn=typeof Blob<"u"?Blob:null,gn={isBrowser:!0,classes:{URLSearchParams:pn,FormData:hn,Blob:mn},protocols:["http","https","file","blob","url","data"]},pt=typeof window<"u"&&typeof document<"u",nt=typeof navigator=="object"&&navigator||void 0,yn=pt&&(!nt||["ReactNative","NativeScript","NS"].indexOf(nt.product)<0),wn=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",bn=pt&&window.location.href||"http://localhost",xn=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:pt,hasStandardBrowserEnv:yn,hasStandardBrowserWebWorkerEnv:wn,navigator:nt,origin:bn},Symbol.toStringTag,{value:"Module"})),X={...xn,...gn};function En(e,t){return We(e,new X.classes.URLSearchParams,{visitor:function(o,r,n,s){return X.isNode&&g.isBuffer(o)?(this.append(r,o.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)},...t})}function Rn(e){return g.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function An(e){const t={},o=Object.keys(e);let r;const n=o.length;let s;for(r=0;r<n;r++)s=o[r],t[s]=e[s];return t}function bo(e){function t(o,r,n,s){let a=o[s++];if(a==="__proto__")return!0;const i=Number.isFinite(+a),d=s>=o.length;return a=!a&&g.isArray(n)?n.length:a,d?(g.hasOwnProp(n,a)?n[a]=[n[a],r]:n[a]=r,!i):((!n[a]||!g.isObject(n[a]))&&(n[a]=[]),t(o,r,n[a],s)&&g.isArray(n[a])&&(n[a]=An(n[a])),!i)}if(g.isFormData(e)&&g.isFunction(e.entries)){const o={};return g.forEachEntry(e,(r,n)=>{t(Rn(r),n,o,0)}),o}return null}function Sn(e,t,o){if(g.isString(e))try{return(t||JSON.parse)(e),g.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(o||JSON.stringify)(e)}const Oe={transitional:wo,adapter:["xhr","http","fetch"],transformRequest:[function(t,o){const r=o.getContentType()||"",n=r.indexOf("application/json")>-1,s=g.isObject(t);if(s&&g.isHTMLForm(t)&&(t=new FormData(t)),g.isFormData(t))return n?JSON.stringify(bo(t)):t;if(g.isArrayBuffer(t)||g.isBuffer(t)||g.isStream(t)||g.isFile(t)||g.isBlob(t)||g.isReadableStream(t))return t;if(g.isArrayBufferView(t))return t.buffer;if(g.isURLSearchParams(t))return o.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let i;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return En(t,this.formSerializer).toString();if((i=g.isFileList(t))||r.indexOf("multipart/form-data")>-1){const d=this.env&&this.env.FormData;return We(i?{"files[]":t}:t,d&&new d,this.formSerializer)}}return s||n?(o.setContentType("application/json",!1),Sn(t)):t}],transformResponse:[function(t){const o=this.transitional||Oe.transitional,r=o&&o.forcedJSONParsing,n=this.responseType==="json";if(g.isResponse(t)||g.isReadableStream(t))return t;if(t&&g.isString(t)&&(r&&!this.responseType||n)){const a=!(o&&o.silentJSONParsing)&&n;try{return JSON.parse(t,this.parseReviver)}catch(i){if(a)throw i.name==="SyntaxError"?F.from(i,F.ERR_BAD_RESPONSE,this,null,this.response):i}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:X.classes.FormData,Blob:X.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};g.forEach(["delete","get","head","post","put","patch"],e=>{Oe.headers[e]={}});const vn=g.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Nn=e=>{const t={};let o,r,n;return e&&e.split(`
`).forEach(function(a){n=a.indexOf(":"),o=a.substring(0,n).trim().toLowerCase(),r=a.substring(n+1).trim(),!(!o||t[o]&&vn[o])&&(o==="set-cookie"?t[o]?t[o].push(r):t[o]=[r]:t[o]=t[o]?t[o]+", "+r:r)}),t},St=Symbol("internals");function xe(e){return e&&String(e).trim().toLowerCase()}function Me(e){return e===!1||e==null?e:g.isArray(e)?e.map(Me):String(e)}function Tn(e){const t=Object.create(null),o=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=o.exec(e);)t[r[1]]=r[2];return t}const Cn=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Je(e,t,o,r,n){if(g.isFunction(r))return r.call(this,t,o);if(n&&(t=o),!!g.isString(t)){if(g.isString(r))return t.indexOf(r)!==-1;if(g.isRegExp(r))return r.test(t)}}function kn(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,o,r)=>o.toUpperCase()+r)}function On(e,t){const o=g.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+o,{value:function(n,s,a){return this[r].call(this,t,n,s,a)},configurable:!0})})}let Q=class{constructor(t){t&&this.set(t)}set(t,o,r){const n=this;function s(i,d,c){const l=xe(d);if(!l)throw new Error("header name must be a non-empty string");const f=g.findKey(n,l);(!f||n[f]===void 0||c===!0||c===void 0&&n[f]!==!1)&&(n[f||d]=Me(i))}const a=(i,d)=>g.forEach(i,(c,l)=>s(c,l,d));if(g.isPlainObject(t)||t instanceof this.constructor)a(t,o);else if(g.isString(t)&&(t=t.trim())&&!Cn(t))a(Nn(t),o);else if(g.isObject(t)&&g.isIterable(t)){let i={},d,c;for(const l of t){if(!g.isArray(l))throw TypeError("Object iterator must return a key-value pair");i[c=l[0]]=(d=i[c])?g.isArray(d)?[...d,l[1]]:[d,l[1]]:l[1]}a(i,o)}else t!=null&&s(o,t,r);return this}get(t,o){if(t=xe(t),t){const r=g.findKey(this,t);if(r){const n=this[r];if(!o)return n;if(o===!0)return Tn(n);if(g.isFunction(o))return o.call(this,n,r);if(g.isRegExp(o))return o.exec(n);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,o){if(t=xe(t),t){const r=g.findKey(this,t);return!!(r&&this[r]!==void 0&&(!o||Je(this,this[r],r,o)))}return!1}delete(t,o){const r=this;let n=!1;function s(a){if(a=xe(a),a){const i=g.findKey(r,a);i&&(!o||Je(r,r[i],i,o))&&(delete r[i],n=!0)}}return g.isArray(t)?t.forEach(s):s(t),n}clear(t){const o=Object.keys(this);let r=o.length,n=!1;for(;r--;){const s=o[r];(!t||Je(this,this[s],s,t,!0))&&(delete this[s],n=!0)}return n}normalize(t){const o=this,r={};return g.forEach(this,(n,s)=>{const a=g.findKey(r,s);if(a){o[a]=Me(n),delete o[s];return}const i=t?kn(s):String(s).trim();i!==s&&delete o[s],o[i]=Me(n),r[i]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const o=Object.create(null);return g.forEach(this,(r,n)=>{r!=null&&r!==!1&&(o[n]=t&&g.isArray(r)?r.join(", "):r)}),o}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,o])=>t+": "+o).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...o){const r=new this(t);return o.forEach(n=>r.set(n)),r}static accessor(t){const r=(this[St]=this[St]={accessors:{}}).accessors,n=this.prototype;function s(a){const i=xe(a);r[i]||(On(n,a),r[i]=!0)}return g.isArray(t)?t.forEach(s):s(t),this}};Q.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);g.reduceDescriptors(Q.prototype,({value:e},t)=>{let o=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(r){this[o]=r}}});g.freezeMethods(Q);function Ye(e,t){const o=this||Oe,r=t||o,n=Q.from(r.headers);let s=r.data;return g.forEach(e,function(i){s=i.call(o,s,n.normalize(),t?t.status:void 0)}),n.normalize(),s}function xo(e){return!!(e&&e.__CANCEL__)}function ge(e,t,o){F.call(this,e??"canceled",F.ERR_CANCELED,t,o),this.name="CanceledError"}g.inherits(ge,F,{__CANCEL__:!0});function Eo(e,t,o){const r=o.config.validateStatus;!o.status||!r||r(o.status)?e(o):t(new F("Request failed with status code "+o.status,[F.ERR_BAD_REQUEST,F.ERR_BAD_RESPONSE][Math.floor(o.status/100)-4],o.config,o.request,o))}function Pn(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function jn(e,t){e=e||10;const o=new Array(e),r=new Array(e);let n=0,s=0,a;return t=t!==void 0?t:1e3,function(d){const c=Date.now(),l=r[s];a||(a=c),o[n]=d,r[n]=c;let f=s,p=0;for(;f!==n;)p+=o[f++],f=f%e;if(n=(n+1)%e,n===s&&(s=(s+1)%e),c-a<t)return;const h=l&&c-l;return h?Math.round(p*1e3/h):void 0}}function Fn(e,t){let o=0,r=1e3/t,n,s;const a=(c,l=Date.now())=>{o=l,n=null,s&&(clearTimeout(s),s=null),e(...c)};return[(...c)=>{const l=Date.now(),f=l-o;f>=r?a(c,l):(n=c,s||(s=setTimeout(()=>{s=null,a(n)},r-f)))},()=>n&&a(n)]}const qe=(e,t,o=3)=>{let r=0;const n=jn(50,250);return Fn(s=>{const a=s.loaded,i=s.lengthComputable?s.total:void 0,d=a-r,c=n(d),l=a<=i;r=a;const f={loaded:a,total:i,progress:i?a/i:void 0,bytes:d,rate:c||void 0,estimated:c&&i&&l?(i-a)/c:void 0,event:s,lengthComputable:i!=null,[t?"download":"upload"]:!0};e(f)},o)},vt=(e,t)=>{const o=e!=null;return[r=>t[0]({lengthComputable:o,total:e,loaded:r}),t[1]]},Nt=e=>(...t)=>g.asap(()=>e(...t)),In=X.hasStandardBrowserEnv?((e,t)=>o=>(o=new URL(o,X.origin),e.protocol===o.protocol&&e.host===o.host&&(t||e.port===o.port)))(new URL(X.origin),X.navigator&&/(msie|trident)/i.test(X.navigator.userAgent)):()=>!0,_n=X.hasStandardBrowserEnv?{write(e,t,o,r,n,s,a){if(typeof document>"u")return;const i=[`${e}=${encodeURIComponent(t)}`];g.isNumber(o)&&i.push(`expires=${new Date(o).toUTCString()}`),g.isString(r)&&i.push(`path=${r}`),g.isString(n)&&i.push(`domain=${n}`),s===!0&&i.push("secure"),g.isString(a)&&i.push(`SameSite=${a}`),document.cookie=i.join("; ")},read(e){if(typeof document>"u")return null;const t=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function Dn(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function Ln(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function Ro(e,t,o){let r=!Dn(t);return e&&(r||o==!1)?Ln(e,t):t}const Tt=e=>e instanceof Q?{...e}:e;function ce(e,t){t=t||{};const o={};function r(c,l,f,p){return g.isPlainObject(c)&&g.isPlainObject(l)?g.merge.call({caseless:p},c,l):g.isPlainObject(l)?g.merge({},l):g.isArray(l)?l.slice():l}function n(c,l,f,p){if(g.isUndefined(l)){if(!g.isUndefined(c))return r(void 0,c,f,p)}else return r(c,l,f,p)}function s(c,l){if(!g.isUndefined(l))return r(void 0,l)}function a(c,l){if(g.isUndefined(l)){if(!g.isUndefined(c))return r(void 0,c)}else return r(void 0,l)}function i(c,l,f){if(f in t)return r(c,l);if(f in e)return r(void 0,c)}const d={url:s,method:s,data:s,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:i,headers:(c,l,f)=>n(Tt(c),Tt(l),f,!0)};return g.forEach(Object.keys({...e,...t}),function(l){const f=d[l]||n,p=f(e[l],t[l],l);g.isUndefined(p)&&f!==i||(o[l]=p)}),o}const Ao=e=>{const t=ce({},e);let{data:o,withXSRFToken:r,xsrfHeaderName:n,xsrfCookieName:s,headers:a,auth:i}=t;if(t.headers=a=Q.from(a),t.url=yo(Ro(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),i&&a.set("Authorization","Basic "+btoa((i.username||"")+":"+(i.password?unescape(encodeURIComponent(i.password)):""))),g.isFormData(o)){if(X.hasStandardBrowserEnv||X.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if(g.isFunction(o.getHeaders)){const d=o.getHeaders(),c=["content-type","content-length"];Object.entries(d).forEach(([l,f])=>{c.includes(l.toLowerCase())&&a.set(l,f)})}}if(X.hasStandardBrowserEnv&&(r&&g.isFunction(r)&&(r=r(t)),r||r!==!1&&In(t.url))){const d=n&&s&&_n.read(s);d&&a.set(n,d)}return t},Mn=typeof XMLHttpRequest<"u",Un=Mn&&function(e){return new Promise(function(o,r){const n=Ao(e);let s=n.data;const a=Q.from(n.headers).normalize();let{responseType:i,onUploadProgress:d,onDownloadProgress:c}=n,l,f,p,h,m;function b(){h&&h(),m&&m(),n.cancelToken&&n.cancelToken.unsubscribe(l),n.signal&&n.signal.removeEventListener("abort",l)}let x=new XMLHttpRequest;x.open(n.method.toUpperCase(),n.url,!0),x.timeout=n.timeout;function A(){if(!x)return;const E=Q.from("getAllResponseHeaders"in x&&x.getAllResponseHeaders()),w={data:!i||i==="text"||i==="json"?x.responseText:x.response,status:x.status,statusText:x.statusText,headers:E,config:e,request:x};Eo(function(_){o(_),b()},function(_){r(_),b()},w),x=null}"onloadend"in x?x.onloadend=A:x.onreadystatechange=function(){!x||x.readyState!==4||x.status===0&&!(x.responseURL&&x.responseURL.indexOf("file:")===0)||setTimeout(A)},x.onabort=function(){x&&(r(new F("Request aborted",F.ECONNABORTED,e,x)),x=null)},x.onerror=function(y){const w=y&&y.message?y.message:"Network Error",N=new F(w,F.ERR_NETWORK,e,x);N.event=y||null,r(N),x=null},x.ontimeout=function(){let y=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const w=n.transitional||wo;n.timeoutErrorMessage&&(y=n.timeoutErrorMessage),r(new F(y,w.clarifyTimeoutError?F.ETIMEDOUT:F.ECONNABORTED,e,x)),x=null},s===void 0&&a.setContentType(null),"setRequestHeader"in x&&g.forEach(a.toJSON(),function(y,w){x.setRequestHeader(w,y)}),g.isUndefined(n.withCredentials)||(x.withCredentials=!!n.withCredentials),i&&i!=="json"&&(x.responseType=n.responseType),c&&([p,m]=qe(c,!0),x.addEventListener("progress",p)),d&&x.upload&&([f,h]=qe(d),x.upload.addEventListener("progress",f),x.upload.addEventListener("loadend",h)),(n.cancelToken||n.signal)&&(l=E=>{x&&(r(!E||E.type?new ge(null,e,x):E),x.abort(),x=null)},n.cancelToken&&n.cancelToken.subscribe(l),n.signal&&(n.signal.aborted?l():n.signal.addEventListener("abort",l)));const R=Pn(n.url);if(R&&X.protocols.indexOf(R)===-1){r(new F("Unsupported protocol "+R+":",F.ERR_BAD_REQUEST,e));return}x.send(s||null)})},$n=(e,t)=>{const{length:o}=e=e?e.filter(Boolean):[];if(t||o){let r=new AbortController,n;const s=function(c){if(!n){n=!0,i();const l=c instanceof Error?c:this.reason;r.abort(l instanceof F?l:new ge(l instanceof Error?l.message:l))}};let a=t&&setTimeout(()=>{a=null,s(new F(`timeout ${t} of ms exceeded`,F.ETIMEDOUT))},t);const i=()=>{e&&(a&&clearTimeout(a),a=null,e.forEach(c=>{c.unsubscribe?c.unsubscribe(s):c.removeEventListener("abort",s)}),e=null)};e.forEach(c=>c.addEventListener("abort",s));const{signal:d}=r;return d.unsubscribe=()=>g.asap(i),d}},qn=function*(e,t){let o=e.byteLength;if(o<t){yield e;return}let r=0,n;for(;r<o;)n=r+t,yield e.slice(r,n),r=n},Bn=async function*(e,t){for await(const o of Gn(e))yield*qn(o,t)},Gn=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:o,value:r}=await t.read();if(o)break;yield r}}finally{await t.cancel()}},Ct=(e,t,o,r)=>{const n=Bn(e,t);let s=0,a,i=d=>{a||(a=!0,r&&r(d))};return new ReadableStream({async pull(d){try{const{done:c,value:l}=await n.next();if(c){i(),d.close();return}let f=l.byteLength;if(o){let p=s+=f;o(p)}d.enqueue(new Uint8Array(l))}catch(c){throw i(c),c}},cancel(d){return i(d),n.return()}},{highWaterMark:2})},kt=64*1024,{isFunction:je}=g,Hn=(({Request:e,Response:t})=>({Request:e,Response:t}))(g.global),{ReadableStream:Ot,TextEncoder:Pt}=g.global,jt=(e,...t)=>{try{return!!e(...t)}catch{return!1}},Wn=e=>{e=g.merge.call({skipUndefined:!0},Hn,e);const{fetch:t,Request:o,Response:r}=e,n=t?je(t):typeof fetch=="function",s=je(o),a=je(r);if(!n)return!1;const i=n&&je(Ot),d=n&&(typeof Pt=="function"?(m=>b=>m.encode(b))(new Pt):async m=>new Uint8Array(await new o(m).arrayBuffer())),c=s&&i&&jt(()=>{let m=!1;const b=new o(X.origin,{body:new Ot,method:"POST",get duplex(){return m=!0,"half"}}).headers.has("Content-Type");return m&&!b}),l=a&&i&&jt(()=>g.isReadableStream(new r("").body)),f={stream:l&&(m=>m.body)};n&&["text","arrayBuffer","blob","formData","stream"].forEach(m=>{!f[m]&&(f[m]=(b,x)=>{let A=b&&b[m];if(A)return A.call(b);throw new F(`Response type '${m}' is not supported`,F.ERR_NOT_SUPPORT,x)})});const p=async m=>{if(m==null)return 0;if(g.isBlob(m))return m.size;if(g.isSpecCompliantForm(m))return(await new o(X.origin,{method:"POST",body:m}).arrayBuffer()).byteLength;if(g.isArrayBufferView(m)||g.isArrayBuffer(m))return m.byteLength;if(g.isURLSearchParams(m)&&(m=m+""),g.isString(m))return(await d(m)).byteLength},h=async(m,b)=>{const x=g.toFiniteNumber(m.getContentLength());return x??p(b)};return async m=>{let{url:b,method:x,data:A,signal:R,cancelToken:E,timeout:y,onDownloadProgress:w,onUploadProgress:N,responseType:_,headers:j,withCredentials:C="same-origin",fetchOptions:D}=Ao(m),T=t||fetch;_=_?(_+"").toLowerCase():"text";let k=$n([R,E&&E.toAbortSignal()],y),U=null;const z=k&&k.unsubscribe&&(()=>{k.unsubscribe()});let W;try{if(N&&c&&x!=="get"&&x!=="head"&&(W=await h(j,A))!==0){let P=new o(b,{method:"POST",body:A,duplex:"half"}),$;if(g.isFormData(A)&&($=P.headers.get("content-type"))&&j.setContentType($),P.body){const[B,V]=vt(W,qe(Nt(N)));A=Ct(P.body,kt,B,V)}}g.isString(C)||(C=C?"include":"omit");const q=s&&"credentials"in o.prototype,O={...D,signal:k,method:x.toUpperCase(),headers:j.normalize().toJSON(),body:A,duplex:"half",credentials:q?C:void 0};U=s&&new o(b,O);let L=await(s?T(U,D):T(b,O));const S=l&&(_==="stream"||_==="response");if(l&&(w||S&&z)){const P={};["status","statusText","headers"].forEach(K=>{P[K]=L[K]});const $=g.toFiniteNumber(L.headers.get("content-length")),[B,V]=w&&vt($,qe(Nt(w),!0))||[];L=new r(Ct(L.body,kt,B,()=>{V&&V(),z&&z()}),P)}_=_||"text";let v=await f[g.findKey(f,_)||"text"](L,m);return!S&&z&&z(),await new Promise((P,$)=>{Eo(P,$,{data:v,headers:Q.from(L.headers),status:L.status,statusText:L.statusText,config:m,request:U})})}catch(q){throw z&&z(),q&&q.name==="TypeError"&&/Load failed|fetch/i.test(q.message)?Object.assign(new F("Network Error",F.ERR_NETWORK,m,U),{cause:q.cause||q}):F.from(q,q&&q.code,m,U)}}},Vn=new Map,So=e=>{let t=e&&e.env||{};const{fetch:o,Request:r,Response:n}=t,s=[r,n,o];let a=s.length,i=a,d,c,l=Vn;for(;i--;)d=s[i],c=l.get(d),c===void 0&&l.set(d,c=i?new Map:Wn(t)),l=c;return c};So();const ht={http:ln,xhr:Un,fetch:{get:So}};g.forEach(ht,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const Ft=e=>`- ${e}`,zn=e=>g.isFunction(e)||e===null||e===!1;function Kn(e,t){e=g.isArray(e)?e:[e];const{length:o}=e;let r,n;const s={};for(let a=0;a<o;a++){r=e[a];let i;if(n=r,!zn(r)&&(n=ht[(i=String(r)).toLowerCase()],n===void 0))throw new F(`Unknown adapter '${i}'`);if(n&&(g.isFunction(n)||(n=n.get(t))))break;s[i||"#"+a]=n}if(!n){const a=Object.entries(s).map(([d,c])=>`adapter ${d} `+(c===!1?"is not supported by the environment":"is not available in the build"));let i=o?a.length>1?`since :
`+a.map(Ft).join(`
`):" "+Ft(a[0]):"as no adapter specified";throw new F("There is no suitable adapter to dispatch the request "+i,"ERR_NOT_SUPPORT")}return n}const vo={getAdapter:Kn,adapters:ht};function Qe(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new ge(null,e)}function It(e){return Qe(e),e.headers=Q.from(e.headers),e.data=Ye.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),vo.getAdapter(e.adapter||Oe.adapter,e)(e).then(function(r){return Qe(e),r.data=Ye.call(e,e.transformResponse,r),r.headers=Q.from(r.headers),r},function(r){return xo(r)||(Qe(e),r&&r.response&&(r.response.data=Ye.call(e,e.transformResponse,r.response),r.response.headers=Q.from(r.response.headers))),Promise.reject(r)})}const No="1.13.2",Ve={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Ve[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const _t={};Ve.transitional=function(t,o,r){function n(s,a){return"[Axios v"+No+"] Transitional option '"+s+"'"+a+(r?". "+r:"")}return(s,a,i)=>{if(t===!1)throw new F(n(a," has been removed"+(o?" in "+o:"")),F.ERR_DEPRECATED);return o&&!_t[a]&&(_t[a]=!0,console.warn(n(a," has been deprecated since v"+o+" and will be removed in the near future"))),t?t(s,a,i):!0}};Ve.spelling=function(t){return(o,r)=>(console.warn(`${r} is likely a misspelling of ${t}`),!0)};function Xn(e,t,o){if(typeof e!="object")throw new F("options must be an object",F.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let n=r.length;for(;n-- >0;){const s=r[n],a=t[s];if(a){const i=e[s],d=i===void 0||a(i,s,e);if(d!==!0)throw new F("option "+s+" must be "+d,F.ERR_BAD_OPTION_VALUE);continue}if(o!==!0)throw new F("Unknown option "+s,F.ERR_BAD_OPTION)}}const Ue={assertOptions:Xn,validators:Ve},re=Ue.validators;let ie=class{constructor(t){this.defaults=t||{},this.interceptors={request:new At,response:new At}}async request(t,o){try{return await this._request(t,o)}catch(r){if(r instanceof Error){let n={};Error.captureStackTrace?Error.captureStackTrace(n):n=new Error;const s=n.stack?n.stack.replace(/^.+\n/,""):"";try{r.stack?s&&!String(r.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+s):r.stack=s}catch{}}throw r}}_request(t,o){typeof t=="string"?(o=o||{},o.url=t):o=t||{},o=ce(this.defaults,o);const{transitional:r,paramsSerializer:n,headers:s}=o;r!==void 0&&Ue.assertOptions(r,{silentJSONParsing:re.transitional(re.boolean),forcedJSONParsing:re.transitional(re.boolean),clarifyTimeoutError:re.transitional(re.boolean)},!1),n!=null&&(g.isFunction(n)?o.paramsSerializer={serialize:n}:Ue.assertOptions(n,{encode:re.function,serialize:re.function},!0)),o.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?o.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:o.allowAbsoluteUrls=!0),Ue.assertOptions(o,{baseUrl:re.spelling("baseURL"),withXsrfToken:re.spelling("withXSRFToken")},!0),o.method=(o.method||this.defaults.method||"get").toLowerCase();let a=s&&g.merge(s.common,s[o.method]);s&&g.forEach(["delete","get","head","post","put","patch","common"],m=>{delete s[m]}),o.headers=Q.concat(a,s);const i=[];let d=!0;this.interceptors.request.forEach(function(b){typeof b.runWhen=="function"&&b.runWhen(o)===!1||(d=d&&b.synchronous,i.unshift(b.fulfilled,b.rejected))});const c=[];this.interceptors.response.forEach(function(b){c.push(b.fulfilled,b.rejected)});let l,f=0,p;if(!d){const m=[It.bind(this),void 0];for(m.unshift(...i),m.push(...c),p=m.length,l=Promise.resolve(o);f<p;)l=l.then(m[f++],m[f++]);return l}p=i.length;let h=o;for(;f<p;){const m=i[f++],b=i[f++];try{h=m(h)}catch(x){b.call(this,x);break}}try{l=It.call(this,h)}catch(m){return Promise.reject(m)}for(f=0,p=c.length;f<p;)l=l.then(c[f++],c[f++]);return l}getUri(t){t=ce(this.defaults,t);const o=Ro(t.baseURL,t.url,t.allowAbsoluteUrls);return yo(o,t.params,t.paramsSerializer)}};g.forEach(["delete","get","head","options"],function(t){ie.prototype[t]=function(o,r){return this.request(ce(r||{},{method:t,url:o,data:(r||{}).data}))}});g.forEach(["post","put","patch"],function(t){function o(r){return function(s,a,i){return this.request(ce(i||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:a}))}}ie.prototype[t]=o(),ie.prototype[t+"Form"]=o(!0)});let Jn=class To{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let o;this.promise=new Promise(function(s){o=s});const r=this;this.promise.then(n=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](n);r._listeners=null}),this.promise.then=n=>{let s;const a=new Promise(i=>{r.subscribe(i),s=i}).then(n);return a.cancel=function(){r.unsubscribe(s)},a},t(function(s,a,i){r.reason||(r.reason=new ge(s,a,i),o(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const o=this._listeners.indexOf(t);o!==-1&&this._listeners.splice(o,1)}toAbortSignal(){const t=new AbortController,o=r=>{t.abort(r)};return this.subscribe(o),t.signal.unsubscribe=()=>this.unsubscribe(o),t.signal}static source(){let t;return{token:new To(function(n){t=n}),cancel:t}}};function Yn(e){return function(o){return e.apply(null,o)}}function Qn(e){return g.isObject(e)&&e.isAxiosError===!0}const st={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(st).forEach(([e,t])=>{st[t]=e});function Co(e){const t=new ie(e),o=no(ie.prototype.request,t);return g.extend(o,ie.prototype,t,{allOwnKeys:!0}),g.extend(o,t,null,{allOwnKeys:!0}),o.create=function(n){return Co(ce(e,n))},o}const G=Co(Oe);G.Axios=ie;G.CanceledError=ge;G.CancelToken=Jn;G.isCancel=xo;G.VERSION=No;G.toFormData=We;G.AxiosError=F;G.Cancel=G.CanceledError;G.all=function(t){return Promise.all(t)};G.spread=Yn;G.isAxiosError=Qn;G.mergeConfig=ce;G.AxiosHeaders=Q;G.formToJSON=e=>bo(g.isHTMLForm(e)?new FormData(e):e);G.getAdapter=vo.getAdapter;G.HttpStatusCode=st;G.default=G;const{Axios:ma,AxiosError:ga,CanceledError:ya,isCancel:wa,CancelToken:ba,VERSION:xa,all:Ea,Cancel:Ra,isAxiosError:Aa,spread:Sa,toFormData:va,AxiosHeaders:Na,HttpStatusCode:Ta,formToJSON:Ca,getAdapter:ka,mergeConfig:Oa}=G,Zn=()=>{if(typeof window<"u"){const e=window.location.hostname;return e.includes("onrender.com")?"/api/sociais":e==="localhost"||e==="127.0.0.1"?"http://localhost:8090/api/sociais":"/api/sociais"}return"/api/sociais"},ye=Zn(),ne=G.create({baseURL:ye,headers:{"Content-Type":"application/json"}});ne.interceptors.response.use(e=>e,e=>{var s,a,i,d,c,l,f,p,h,m,b,x,A,R,E,y,w,N,_,j,C;const t=((a=(s=e.response)==null?void 0:s.data)==null?void 0:a.error)||e.message||"Erro desconhecido",o=(i=e.response)==null?void 0:i.status,r=(d=e.config)==null?void 0:d.url,n=(c=e.config)==null?void 0:c.data;return console.error("âŒ Erro na API:",{url:r,status:o,message:t,responseData:(l=e.response)==null?void 0:l.data,responseBody:(f=e.response)==null?void 0:f.data,responseHeaders:(p=e.response)==null?void 0:p.headers,requestData:n?JSON.parse(n):null,requestHeaders:(h=e.config)==null?void 0:h.headers,fullError:e}),console.error("ðŸ“‹ BODY DA RESPOSTA DE ERRO:",{status:o,statusText:(m=e.response)==null?void 0:m.statusText,data:(b=e.response)==null?void 0:b.data,dataStringified:JSON.stringify((x=e.response)==null?void 0:x.data,null,2),headers:(A=e.response)==null?void 0:A.headers}),(o===400||o===500)&&console.error(`ðŸ“‹ Detalhes do erro ${o}:`,{mensagem:(E=(R=e.response)==null?void 0:R.data)==null?void 0:E.error,success:(w=(y=e.response)==null?void 0:y.data)==null?void 0:w.success,details:(_=(N=e.response)==null?void 0:N.data)==null?void 0:_.details,bodyCompleto:(j=e.response)==null?void 0:j.data,dadosEnviados:n?JSON.parse(n):null,headers:(C=e.config)==null?void 0:C.headers}),Promise.reject(e)});const es=async e=>{var t,o,r,n,s,a,i;try{console.log("ðŸ”„ Criando tabulaÃ§Ã£o com dados:",e);const d=await ne.post("/tabulation",e);return console.log("âœ… TabulaÃ§Ã£o criada com sucesso:",d.data),d.data}catch(d){if(console.error("âŒ Erro ao criar tabulaÃ§Ã£o:",{status:(t=d.response)==null?void 0:t.status,error:(o=d.response)==null?void 0:o.data,message:d.message}),((r=d.response)==null?void 0:r.status)===400){const c=((s=(n=d.response)==null?void 0:n.data)==null?void 0:s.error)||"Dados invÃ¡lidos. Verifique os campos obrigatÃ³rios.";return console.error("ðŸ“‹ Erro 400 detalhado:",c),{success:!1,error:c}}throw new Error(((i=(a=d.response)==null?void 0:a.data)==null?void 0:i.error)||"Erro ao criar tabulaÃ§Ã£o")}},ko=async(e={})=>{var t,o,r,n,s,a,i;try{const d=new URLSearchParams;e.socialNetwork&&e.socialNetwork!==""&&d.append("socialNetwork",e.socialNetwork),e.contactReason&&e.contactReason!==""&&d.append("contactReason",e.contactReason),e.sentiment&&e.sentiment!==""&&d.append("sentiment",e.sentiment),e.dateFrom&&d.append("dateFrom",e.dateFrom),e.dateTo&&d.append("dateTo",e.dateTo);const c=`${ye}/tabulations?${d.toString()}`;console.log("ðŸŒ [API] Chamando:",c),console.log("ðŸŒ [API] Filtros enviados:",e);const l=await ne.get("/tabulations",{params:d});return console.log("âœ… [API] Resposta recebida:",{status:l.status,count:(t=l.data)==null?void 0:t.count,hasData:!!((o=l.data)!=null&&o.data)}),l.data}catch(d){throw console.error("âŒ [API] Erro ao listar tabulaÃ§Ãµes:",{status:(r=d.response)==null?void 0:r.status,message:d.message,responseData:(n=d.response)==null?void 0:n.data,url:(s=d.config)==null?void 0:s.url}),new Error(((i=(a=d.response)==null?void 0:a.data)==null?void 0:i.error)||"Erro ao listar tabulaÃ§Ãµes")}},ts=async(e={})=>{var t,o,r,n,s,a,i,d,c,l,f,p;try{console.log("ðŸ“Š [API] getDashboardMetrics - Filtros recebidos:",e);const h=new URLSearchParams;e.socialNetwork&&e.socialNetwork!==""&&h.append("socialNetwork",e.socialNetwork),e.contactReason&&e.contactReason!==""&&h.append("contactReason",e.contactReason),e.dateFrom&&h.append("dateFrom",e.dateFrom),e.dateTo&&h.append("dateTo",e.dateTo);const m=`${ye}/dashboard/metrics?${h.toString()}`;console.log("ðŸŒ [API] getDashboardMetrics - URL completa:",m),console.log("ðŸŒ [API] getDashboardMetrics - ParÃ¢metros construÃ­dos:",Object.fromEntries(h));const b=await ne.get("/dashboard/metrics",{params:h});return console.log("âœ… [API] getDashboardMetrics - Resposta recebida:",{status:b.status,success:(t=b.data)==null?void 0:t.success,hasData:!!((o=b.data)!=null&&o.data),dataKeys:(r=b.data)!=null&&r.data?Object.keys(b.data.data):[]}),b.data}catch(h){if(console.error("âŒ [API] getDashboardMetrics - Erro:",{status:(n=h.response)==null?void 0:n.status,message:h.message,responseData:(s=h.response)==null?void 0:s.data,url:(a=h.config)==null?void 0:a.url}),((i=h.response)==null?void 0:i.status)===500)return console.error("Erro 500 no servidor ao buscar mÃ©tricas:",(d=h.response)==null?void 0:d.data),(l=(c=h.response)==null?void 0:c.data)!=null&&l.data?{success:!0,data:h.response.data.data}:{success:!1,error:"Erro interno do servidor ao buscar mÃ©tricas. Tente novamente mais tarde."};throw new Error(((p=(f=h.response)==null?void 0:f.data)==null?void 0:p.error)||"Erro ao obter mÃ©tricas")}},at=async(e={})=>{var t,o,r,n,s,a,i,d,c,l,f,p;try{console.log("ðŸ“Š [API] getChartData - Filtros recebidos:",e);const h=new URLSearchParams;e.socialNetwork&&e.socialNetwork!==""&&h.append("socialNetwork",e.socialNetwork),e.contactReason&&e.contactReason!==""&&h.append("contactReason",e.contactReason),e.dateFrom&&h.append("dateFrom",e.dateFrom),e.dateTo&&h.append("dateTo",e.dateTo);const m=`${ye}/dashboard/charts?${h.toString()}`;console.log("ðŸŒ [API] getChartData - URL completa:",m),console.log("ðŸŒ [API] getChartData - ParÃ¢metros construÃ­dos:",Object.fromEntries(h));const b=await ne.get("/dashboard/charts",{params:h});return console.log("âœ… [API] getChartData - Resposta recebida:",{status:b.status,success:(t=b.data)==null?void 0:t.success,hasData:!!((o=b.data)!=null&&o.data),dataKeys:(r=b.data)!=null&&r.data?Object.keys(b.data.data):[]}),b.data}catch(h){if(console.error("âŒ [API] getChartData - Erro:",{status:(n=h.response)==null?void 0:n.status,message:h.message,responseData:(s=h.response)==null?void 0:s.data,url:(a=h.config)==null?void 0:a.url}),((i=h.response)==null?void 0:i.status)===500)return console.error("Erro 500 no servidor ao buscar dados de grÃ¡ficos:",(d=h.response)==null?void 0:d.data),(l=(c=h.response)==null?void 0:c.data)!=null&&l.data?{success:!0,data:h.response.data.data}:{success:!1,error:"Erro interno do servidor ao buscar dados de grÃ¡ficos. Tente novamente mais tarde."};throw new Error(((p=(f=h.response)==null?void 0:f.data)==null?void 0:p.error)||"Erro ao obter dados de grÃ¡ficos")}},os=async(e={})=>{var t,o,r,n,s,a,i,d,c,l;try{console.log("ðŸ“Š [API] getFeed - Filtros recebidos:",e);const f=new URLSearchParams;e.socialNetwork&&e.socialNetwork!==""&&f.append("socialNetwork",e.socialNetwork),e.contactReason&&e.contactReason!==""&&f.append("contactReason",e.contactReason),e.sentiment&&e.sentiment!==""&&f.append("sentiment",e.sentiment),e.dateFrom&&f.append("dateFrom",e.dateFrom),e.dateTo&&f.append("dateTo",e.dateTo);const p=`${ye}/feed?${f.toString()}`;console.log("ðŸŒ [API] getFeed - URL completa:",p),console.log("ðŸŒ [API] getFeed - ParÃ¢metros construÃ­dos:",Object.fromEntries(f));const h=await ne.get("/feed",{params:f});return console.log("âœ… [API] getFeed - Resposta recebida:",{status:h.status,success:(t=h.data)==null?void 0:t.success,count:(o=h.data)==null?void 0:o.count,hasData:!!((r=h.data)!=null&&r.data),dataLength:(s=(n=h.data)==null?void 0:n.data)==null?void 0:s.length}),h.data}catch(f){throw console.error("âŒ [API] getFeed - Erro:",{status:(a=f.response)==null?void 0:a.status,message:f.message,responseData:(i=f.response)==null?void 0:i.data,url:(d=f.config)==null?void 0:d.url}),new Error(((l=(c=f.response)==null?void 0:c.data)==null?void 0:l.error)||"Erro ao obter feed")}},rs=async e=>{var t,o;try{return(await ne.post("/analyze",{text:e})).data}catch(r){throw new Error(((o=(t=r.response)==null?void 0:t.data)==null?void 0:o.error)||"Erro ao analisar texto")}},ns=async(e={})=>{var t,o,r,n,s,a,i,d,c,l,f;try{console.log("ðŸ“Š [API] getRatingAverage - Filtros recebidos:",e);const p=new URLSearchParams;e.socialNetwork&&e.socialNetwork!==""&&p.append("socialNetwork",e.socialNetwork),e.dateFrom&&p.append("dateFrom",e.dateFrom),e.dateTo&&p.append("dateTo",e.dateTo);const h=`${ye}/rating/average?${p.toString()}`;console.log("ðŸŒ [API] getRatingAverage - URL completa:",h),console.log("ðŸŒ [API] getRatingAverage - ParÃ¢metros construÃ­dos:",Object.fromEntries(p));const m=await ne.get("/rating/average",{params:p});return console.log("âœ… [API] getRatingAverage - Resposta recebida:",{status:m.status,success:(t=m.data)==null?void 0:t.success,average:(r=(o=m.data)==null?void 0:o.data)==null?void 0:r.average,count:(s=(n=m.data)==null?void 0:n.data)==null?void 0:s.count}),m.data}catch(p){if(console.error("âŒ [API] getRatingAverage - Erro:",{status:(a=p.response)==null?void 0:a.status,message:p.message,responseData:(i=p.response)==null?void 0:i.data,url:(d=p.config)==null?void 0:d.url}),((c=p.response)==null?void 0:c.status)===404)return console.warn("âš ï¸ [API] getRatingAverage - Endpoint /rating/average nÃ£o encontrado. Retornando null."),{success:!1,data:null};throw new Error(((f=(l=p.response)==null?void 0:l.data)==null?void 0:f.error)||"Erro ao obter mÃ©dia de rating")}},ss=()=>{const[e,t]=I.useState({clientName:"",socialNetwork:"Instagram",messageText:"",rating:"",contactReason:"",sentiment:"",directedCenter:!1,link:"",createdAt:""}),[o,r]=I.useState(!1),[n,s]=I.useState(!1),[a,i]=I.useState(""),d=["Instagram","Facebook","TikTok","Messenger","YouTube","PlayStore"],c=["Produto","Suporte","Bug","Elogio","ReclamaÃ§Ã£o","Oculto","Outro"],l=["Positivo","Neutro","Negativo"],f=m=>{const{name:b,value:x,type:A,checked:R}=m.target;t(E=>({...E,[b]:A==="checkbox"?R:x}))},p=async()=>{if(!e.messageText.trim()){i("Por favor, insira o texto da mensagem para anÃ¡lise");return}s(!0);try{const m=await rs(e.messageText);m.success?(t(b=>({...b,sentiment:m.data.sentiment,contactReason:m.data.reason})),i("AnÃ¡lise realizada com sucesso!")):m.fallback&&(t(b=>({...b,sentiment:m.fallback.sentiment,contactReason:m.fallback.reason})),i("AnÃ¡lise realizada com valores padrÃ£o"))}catch(m){i(`Erro na anÃ¡lise: ${m.message}`)}finally{s(!1)}},h=async m=>{var b,x,A;if(m.preventDefault(),!e.clientName||!e.messageText){i("Preencha os campos obrigatÃ³rios");return}s(!0),i("");try{let R=null;if(e.rating&&e.rating!==""){const w=e.rating.replace("â­","").trim();if(w){const N=parseInt(w,10);!isNaN(N)&&N>=1&&N<=5&&(R=N)}}const E={clientName:(e.clientName||"").trim(),socialNetwork:e.socialNetwork||"",messageText:(e.messageText||"").trim(),rating:R,contactReason:e.contactReason&&e.contactReason.trim()!==""?e.contactReason.trim():null,sentiment:e.sentiment&&e.sentiment.trim()!==""?e.sentiment.trim():null,directedCenter:!!e.directedCenter,link:e.link&&e.link.trim()!==""?e.link.trim():null,createdAt:e.createdAt&&e.createdAt.trim()!==""?e.createdAt:null};if(!E.clientName||!E.socialNetwork||!E.messageText){i("Erro: Preencha todos os campos obrigatÃ³rios (Nome do Cliente, Rede Social e Mensagem)"),s(!1);return}console.log("ðŸ“¤ Enviando dados para API:",E);const y=await es(E);console.log("ðŸ“¥ Resposta da API:",y),y.success?(i("TabulaÃ§Ã£o criada com sucesso!"),t({clientName:"",socialNetwork:"Instagram",messageText:"",rating:"",contactReason:"",sentiment:"",directedCenter:!1,link:"",createdAt:""})):i(`Erro: ${y.error||"Erro desconhecido ao criar tabulaÃ§Ã£o"}`)}catch(R){const E=((x=(b=R.response)==null?void 0:b.data)==null?void 0:x.error)||R.message||"Erro desconhecido ao criar tabulaÃ§Ã£o";console.error("Erro detalhado:",((A=R.response)==null?void 0:A.data)||R),i(`Erro: ${E}`)}finally{s(!1)}};return u.jsxs("div",{className:"velohub-container",children:[u.jsxs("h2",{className:"section-title",children:[u.jsx(hr,{className:"section-icon"}),"Nova TabulaÃ§Ã£o"]}),a&&u.jsx("div",{className:`message ${a.includes("sucesso")?"success":"error"}`,children:a}),u.jsxs("form",{onSubmit:h,className:"tabulation-form",children:[u.jsxs("div",{className:"form-row",children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"clientName",children:"Nome do Cliente *"}),u.jsx("input",{type:"text",id:"clientName",name:"clientName",value:e.clientName,onChange:f,className:"velohub-input",required:!0})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"socialNetwork",children:"Rede Social *"}),u.jsx("select",{id:"socialNetwork",name:"socialNetwork",value:e.socialNetwork,onChange:f,className:"velohub-input",required:!0,children:d.map(m=>u.jsx("option",{value:m,children:m},m))})]})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"createdAt",children:"Data da TabulaÃ§Ã£o (Opcional)"}),u.jsx("input",{type:"date",id:"createdAt",name:"createdAt",value:e.createdAt,onChange:f,className:"velohub-input",title:"Deixe em branco para usar a data atual"}),u.jsx("small",{style:{color:"#888",fontSize:"12px",display:"block",marginTop:"4px"},children:"Deixe em branco para usar a data/hora atual"})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"messageText",children:"Texto da Mensagem Principal *"}),u.jsx("textarea",{id:"messageText",name:"messageText",value:e.messageText,onChange:f,className:"velohub-input",rows:"4",required:!0})]}),(e.socialNetwork==="YouTube"||e.socialNetwork==="TikTok")&&u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"link",children:"Link do VÃ­deo"}),u.jsx("input",{type:"url",id:"link",name:"link",value:e.link,onChange:f,className:"velohub-input",placeholder:"Ex: https://www.youtube.com/watch?v=... ou https://www.tiktok.com/@... ou https://drive.google.com/..."})]}),e.socialNetwork==="PlayStore"&&u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"rating",children:"AvaliaÃ§Ã£o *"}),u.jsxs("select",{id:"rating",name:"rating",value:e.rating,onChange:f,className:"velohub-input",required:!0,children:[u.jsx("option",{value:"",children:"Selecione"}),u.jsx("option",{value:"1â­",children:"1â­"}),u.jsx("option",{value:"2â­",children:"2â­"}),u.jsx("option",{value:"3â­",children:"3â­"}),u.jsx("option",{value:"4â­",children:"4â­"}),u.jsx("option",{value:"5â­",children:"5â­"})]})]}),u.jsxs("div",{className:"form-row",children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"contactReason",children:"Motivo do Contato"}),u.jsxs("select",{id:"contactReason",name:"contactReason",value:e.contactReason,onChange:f,className:"velohub-input",children:[u.jsx("option",{value:"",children:"Selecione"}),c.map(m=>u.jsx("option",{value:m,children:m},m))]})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"sentiment",children:"Sentimento"}),u.jsxs("select",{id:"sentiment",name:"sentiment",value:e.sentiment,onChange:f,className:"velohub-input",children:[u.jsx("option",{value:"",children:"Selecione"}),l.map(m=>u.jsx("option",{value:m,children:m},m))]})]})]}),u.jsx("div",{className:"form-group",children:u.jsxs("label",{htmlFor:"directedCenter",className:"checkbox-label",children:[u.jsx("input",{type:"checkbox",id:"directedCenter",name:"directedCenter",checked:e.directedCenter,onChange:f}),"Direcionado para Central"]})}),u.jsxs("div",{className:"form-group",children:[u.jsxs("label",{htmlFor:"useAI",className:"checkbox-label",children:[u.jsx("input",{type:"checkbox",id:"useAI",checked:o,onChange:m=>r(m.target.checked)}),"Usar AnÃ¡lise Expressa (IA)"]}),o&&u.jsx("button",{type:"button",onClick:p,className:"velohub-btn secondary",disabled:n||!e.messageText.trim(),children:n?"Analisando...":"Analisar com IA"})]}),u.jsx("button",{type:"submit",className:"velohub-btn",disabled:n,children:n?"Salvando...":"Salvar TabulaÃ§Ã£o"})]})]})},as=["que","e","de","a","o","para","com","em","um","uma","Ã©","no","na","do","da","dos","das","por","se","mais","como","mas","foi","ao","ele","ela","nos","nas","pelo","pela","pelos","pelas","sÃ£o","ser","ter","tem","estÃ¡","estÃ£o","foram","serÃ¡","serÃ£o","terÃ¡","terÃ£o","este","esta","estes","estas","esse","essa","esses","essas","aquele","aquela","aqueles","aquelas","me","te","se","nos","vos","lhe","lhes","meu","minha","meus","minhas","teu","tua","teus","tuas","seu","sua","seus","suas","nosso","nossa","nossos","nossas","deles","delas","ao","aos","Ã s","pelo","pela","pelos","pelas","num","numa","nuns","numas","dum","duma","duns","dumas","num","numa","nuns","numas","Ã ","Ã s","pelo","pela","pelos","pelas","do","da","dos","das","no","na","nos","nas"],is=e=>!e||typeof e!="string"?[]:e.toLowerCase().replace(/[.,!?;:()\[\]{}'"]/g," ").replace(/\s+/g," ").trim().split(/\s+/).filter(r=>r.length>=3&&r.length<=20),cs=e=>{if(!Array.isArray(e)||e.length===0)return{};const t={};return e.forEach(o=>{if(!o||typeof o!="string")return;is(o).filter(s=>!as.includes(s)).forEach(s=>{t[s]=(t[s]||0)+1})}),t},ls=(e,t=50)=>{if(!Array.isArray(e)||e.length===0)return[];const o=e.map(s=>s.messageText||s.message_text||"").filter(s=>s&&typeof s=="string"&&s.trim().length>0);if(o.length===0)return[];const r=cs(o);return Object.entries(r).map(([s,a])=>({text:s,value:a})).sort((s,a)=>a.value-s.value).slice(0,t)},ds=({messages:e=[],filters:t={},onWordClick:o,onWordsProcessed:r})=>{const n=I.useRef(""),s=I.useMemo(()=>!Array.isArray(e)||e.length===0?[]:ls(e,50),[e]);I.useEffect(()=>{if(r&&s.length>0){const f=s.map(h=>h.text),p=f.join(",");p!==n.current&&(n.current=p,r(f))}},[s,r]);const a=["#1634FF","#00d1b2","#ffd93d","#ff6b6b","#6bcf7f","#a29bfe","#ff9f43"],d={rotations:3,rotationSteps:2,rotation:()=>{const f=[0,0,0,0,0,45,-45,90,-90];return f[Math.floor(Math.random()*f.length)]},fontSizes:[20,60],fontFamily:"Arial, sans-serif",fontWeight:"bold",scale:"sqrt",spiral:"archimedean",transitionDuration:1e3,callbacks:{onWordClick:f=>{o&&o(f.text)}}},c=(f,p)=>a[p%a.length];if(s.length===0)return u.jsxs("div",{className:"chart-container",children:[u.jsx("h3",{children:"â˜ï¸ Nuvem de Palavras (Insights)"}),u.jsx("div",{style:{padding:"40px",textAlign:"center",color:"#888",backgroundColor:"#1e2130",borderRadius:"8px",minHeight:"400px",display:"flex",alignItems:"center",justifyContent:"center"},children:u.jsx("p",{children:"Nenhum dado disponÃ­vel para gerar a nuvem de palavras."})})]});const l=s.map((f,p)=>({...f,color:c(f,p)}));return u.jsxs("div",{className:"chart-container",children:[u.jsx("h3",{children:"â˜ï¸ Nuvem de Palavras (Insights)"}),u.jsx("div",{style:{width:"100%",height:"400px",backgroundColor:"#ffffff",borderRadius:"8px",padding:"20px",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",cursor:o?"pointer":"default"},children:u.jsx(ur,{words:l,options:d,size:[800,400]})}),u.jsx("p",{style:{marginTop:"10px",fontSize:"12px",color:"#888",textAlign:"center"},children:o?"Clique em uma palavra para filtrar o Feed de Atendimento":"Palavras mais frequentes nos textos de atendimento (stopwords removidas)"})]})};var ro;const Se=((ro=bt)==null?void 0:ro.default)||bt;typeof Se!="function"&&console.error("createPlotlyComponent nÃ£o Ã© uma funÃ§Ã£o:",Se);const Fe=Se&&typeof Se=="function"?Se(wr):null,us=({onWordClick:e,setWordCloudWords:t})=>{const[o,r]=I.useState(null),[n,s]=I.useState(null),[a,i]=I.useState(null),[d,c]=I.useState([]),[l,f]=I.useState({socialNetwork:"",contactReason:"",dateFrom:"",dateTo:""}),[p,h]=I.useState(!0),m=["Instagram","Facebook","TikTok","Messenger","YouTube","PlayStore"],b=["Produto","Suporte","Bug","Elogio","ReclamaÃ§Ã£o","Oculto","Outro"];I.useEffect(()=>{x()},[l]);const x=async()=>{var E,y,w,N,_,j,C,D,T,k,U,z,W,q,O;h(!0);try{const[L,S,v,P]=await Promise.allSettled([ts(l),at(l),ns(l),ko(l)]);L.status==="fulfilled"?(E=L.value)!=null&&E.success&&((y=L.value)!=null&&y.data)||(w=L.value)!=null&&w.data?r(L.value.data):console.error("Erro ao carregar mÃ©tricas:",(N=L.value)==null?void 0:N.error):console.error("Erro ao carregar mÃ©tricas:",L.reason),S.status==="fulfilled"?(_=S.value)!=null&&_.success&&((j=S.value)!=null&&j.data)||(C=S.value)!=null&&C.data?s(S.value.data):console.error("Erro ao carregar grÃ¡ficos:",(D=S.value)==null?void 0:D.error):console.error("Erro ao carregar grÃ¡ficos:",S.reason),v.status==="fulfilled"&&((T=v.value)!=null&&T.success)&&((k=v.value)!=null&&k.data)?i(v.value.data):v.status==="rejected"&&console.warn("Endpoint de rating nÃ£o disponÃ­vel:",(U=v.reason)==null?void 0:U.message),P.status==="fulfilled"?(z=P.value)!=null&&z.data&&Array.isArray(P.value.data)?c(P.value.data):((W=P.value)==null?void 0:W.success)===!1?(console.warn("Erro ao carregar mensagens para WordCloud:",(q=P.value)==null?void 0:q.error),c([])):c([]):P.status==="rejected"&&(console.warn("Erro ao carregar mensagens para WordCloud:",(O=P.reason)==null?void 0:O.message),c([]))}catch(L){console.error("Erro ao carregar dados:",L)}finally{h(!1)}},A=(E,y)=>{f(w=>({...w,[E]:y}))},R=I.useCallback(E=>{t&&t(E)},[t]);return p?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"filters-section",children:u.jsx("p",{children:"Carregando dados..."})}),u.jsx("div",{className:"velohub-container",children:u.jsx("p",{children:"Carregando dados..."})})]}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"filters-section",children:[u.jsxs("div",{className:"filter-group",children:[u.jsx("label",{children:"Rede Social"}),u.jsxs("select",{value:l.socialNetwork,onChange:E=>A("socialNetwork",E.target.value),className:"velohub-input",children:[u.jsx("option",{value:"",children:"Todas"}),m.map(E=>u.jsx("option",{value:E,children:E},E))]})]}),u.jsxs("div",{className:"filter-group",children:[u.jsx("label",{children:"Motivo"}),u.jsxs("select",{value:l.contactReason,onChange:E=>A("contactReason",E.target.value),className:"velohub-input",children:[u.jsx("option",{value:"",children:"Todos"}),b.map(E=>u.jsx("option",{value:E,children:E},E))]})]}),u.jsxs("div",{className:"filter-group filter-group-date",children:[u.jsx("label",{children:"Data Inicial"}),u.jsx("input",{type:"date",value:l.dateFrom,onChange:E=>A("dateFrom",E.target.value),className:"velohub-input"})]}),u.jsxs("div",{className:"filter-group filter-group-date",children:[u.jsx("label",{children:"Data Final"}),u.jsx("input",{type:"date",value:l.dateTo,onChange:E=>A("dateTo",E.target.value),className:"velohub-input"})]})]}),u.jsxs("div",{className:"velohub-container",children:[o&&u.jsxs("div",{className:"metrics-cards",children:[u.jsxs("div",{className:"metric-card",children:[u.jsx("h3",{children:"Total de Contatos"}),u.jsx("p",{className:"metric-value",children:o.totalContacts})]}),u.jsxs("div",{className:"metric-card",children:[u.jsx("h3",{children:"% Sentimento Positivo"}),u.jsxs("p",{className:"metric-value",children:[o.positivePercent,"%"]})]}),a?u.jsxs("div",{className:"metric-card",children:[u.jsx("h3",{children:"MÃ©dia"}),u.jsxs("p",{className:"metric-value",children:[a.average?a.average.toFixed(2):"N/A",a.average&&u.jsx("span",{className:"metric-unit",children:"â­"})]})]}):u.jsxs("div",{className:"metric-card",children:[u.jsx("h3",{children:"MÃ©dia"}),u.jsx("p",{className:"metric-value",children:"N/A"})]}),u.jsxs("div",{className:"metric-card",children:[u.jsx("h3",{children:"Rede mais Ativa"}),u.jsx("p",{className:"metric-value",children:o.mostActiveNetwork||"N/A"})]})]}),n&&Fe&&u.jsxs("div",{className:"charts-section",children:[u.jsxs("div",{className:"chart-container",children:[u.jsx("h3",{children:"Volume por Rede Social"}),u.jsx(Fe,{data:[{x:n.networkVolume.map(E=>E.socialNetwork),y:n.networkVolume.map(E=>E.count),type:"bar",marker:{color:"#1634FF"}}],layout:{title:"",xaxis:{title:"Rede Social"},yaxis:{title:"Quantidade"},paper_bgcolor:"rgba(0,0,0,0)",plot_bgcolor:"rgba(0,0,0,0)"},style:{width:"100%",height:"400px"}})]}),u.jsxs("div",{className:"chart-container",children:[u.jsx("h3",{children:"Motivos Frequentes"}),u.jsx(Fe,{data:[{values:n.reasonFrequency.map(E=>E.count),labels:n.reasonFrequency.map(E=>E.reason),type:"pie",hole:.4}],layout:{title:"",paper_bgcolor:"rgba(0,0,0,0)",plot_bgcolor:"rgba(0,0,0,0)"},style:{width:"100%",height:"400px"}})]})]}),n&&!Fe&&u.jsx("div",{className:"charts-section",children:u.jsx("p",{children:"Carregando grÃ¡ficos..."})}),u.jsx(ds,{messages:d,filters:l,onWordClick:e,onWordsProcessed:R})]})]})},fs=({value:e,onChange:t,options:o=[],placeholder:r="Digite ou selecione uma palavra"})=>{const[n,s]=I.useState(!1),[a,i]=I.useState(e||""),[d,c]=I.useState(o),l=I.useRef(null),f=I.useRef(null),p=o.slice(0,20);I.useEffect(()=>{i(e||"")},[e]),I.useEffect(()=>{if(a.trim()==="")c(p);else{const R=a.toLowerCase(),E=p.filter(y=>y.toLowerCase().includes(R));c(E)}},[a,o]),I.useEffect(()=>{const R=E=>{l.current&&!l.current.contains(E.target)&&s(!1)};return document.addEventListener("mousedown",R),()=>{document.removeEventListener("mousedown",R)}},[]),I.useEffect(()=>()=>{f.current&&clearTimeout(f.current)},[]);const h=R=>{const E=R.target.value;i(E),s(!0),f.current&&clearTimeout(f.current),f.current=setTimeout(()=>{t&&t(E)},300)},m=R=>{i(R),s(!1),t&&t(R)},b=()=>{s(!0)},x=R=>{R.key==="Escape"?s(!1):R.key==="Enter"&&d.length>0&&n&&m(d[0])},A=e&&p.includes(e);return u.jsxs("div",{ref:l,style:{position:"relative",flex:1},children:[u.jsxs("div",{style:{position:"relative"},children:[u.jsx("input",{type:"text",value:a,onChange:h,onFocus:b,onKeyDown:x,placeholder:r,className:"velohub-input",style:{width:"100%",paddingRight:A?"30px":"10px"}}),A&&u.jsx("span",{style:{position:"absolute",right:"10px",top:"50%",transform:"translateY(-50%)",fontSize:"12px",color:"#1634FF",fontWeight:"bold",pointerEvents:"none"},title:"Palavra da Nuvem de Palavras",children:"â˜ï¸"})]}),n&&d.length>0&&u.jsx("div",{style:{position:"absolute",top:"100%",left:0,right:0,backgroundColor:"#1e2130",border:"1px solid #2d3142",borderRadius:"4px",marginTop:"4px",maxHeight:"200px",overflowY:"auto",zIndex:1e3,boxShadow:"0 4px 6px rgba(0, 0, 0, 0.3)"},children:d.map((R,E)=>u.jsx("div",{onClick:()=>m(R),style:{padding:"10px 15px",cursor:"pointer",borderBottom:E<d.length-1?"1px solid #2d3142":"none",backgroundColor:a===R?"#1634FF":"transparent",color:a===R?"#fff":"#e0e0e0",transition:"background-color 0.2s"},onMouseEnter:y=>{a!==R&&(y.target.style.backgroundColor="#2d3142")},onMouseLeave:y=>{a!==R&&(y.target.style.backgroundColor="transparent")},children:R},E))})]})},ps=e=>{if(!e)return"";try{const t=new Date(e);return isNaN(t.getTime())?"":new Intl.DateTimeFormat("pt-BR",{timeZone:"America/Sao_Paulo",day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1}).format(t)}catch{return""}},hs=(e,t={},o=null)=>{try{if(!e||e.length===0)return alert("NÃ£o hÃ¡ dados para exportar"),{success:!1,error:"Nenhum dado disponÃ­vel"};const r=e.map((l,f)=>({NÂº:f+1,"Data/Hora":ps(l.createdAt),"Rede Social":l.socialNetwork||"N/A",Cliente:l.clientName||"N/A",Mensagem:l.messageText||"",Motivo:l.contactReason||"N/A",Sentimento:l.sentiment||"N/A",AvaliaÃ§Ã£o:l.rating?`${l.rating}â­`:"N/A","Direcionado para Central":l.directedCenter?"Sim":"NÃ£o",Link:l.link||""})),n=be.book_new(),s=be.json_to_sheet(r),a=[{wch:5},{wch:20},{wch:15},{wch:25},{wch:50},{wch:15},{wch:15},{wch:12},{wch:25},{wch:40}];s["!cols"]=a,be.book_append_sheet(n,s,"TabulaÃ§Ãµes");const i=[["InformaÃ§Ãµes da ExportaÃ§Ã£o"],[""],["Data da ExportaÃ§Ã£o:",new Date().toLocaleString("pt-BR")],["Total de Registros:",e.length],[""],["Filtros Aplicados:"],["Rede Social:",t.socialNetwork||"Todas"],["Motivo:",t.contactReason||"Todos"],["Sentimento:",t.sentiment||"Todos"],["Data Inicial:",t.dateFrom||"NÃ£o especificada"],["Data Final:",t.dateTo||"NÃ£o especificada"],["Palavra-Chave:",t.keyword||"Nenhuma"]],d=be.aoa_to_sheet(i);d["!cols"]=[{wch:25},{wch:30}],be.book_append_sheet(n,d,"InformaÃ§Ãµes");const c=o||`tabulacoes_${new Date().toISOString().split("T")[0]}.xlsx`;return br(n,c),{success:!0,filename:c}}catch(r){return console.error("Erro ao exportar para Excel:",r),{success:!1,error:r.message}}},ms=({size:e=24,color:t="#ffffff",strokeColor:o="#000000",backgroundColor:r="#1634FF",showBackground:n=!1})=>u.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[n&&u.jsx("rect",{x:"2",y:"2",width:"20",height:"20",rx:"4",fill:r,stroke:o,strokeWidth:"0.5"}),u.jsx("path",{d:"M12 6V14M12 14L9 11M12 14L15 11",stroke:o,strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"}),u.jsx("path",{d:"M12 6V14M12 14L9 11M12 14L15 11",stroke:t,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"}),u.jsx("path",{d:"M6 16H18",stroke:o,strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"}),u.jsx("path",{d:"M7 16V18C7 18.5523 7.44772 19 8 19H16C16.5523 19 17 18.5523 17 18V16",stroke:o,strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"}),u.jsx("path",{d:"M6 16H18",stroke:t,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),u.jsx("path",{d:"M7 16V18C7 18.5523 7.44772 19 8 19H16C16.5523 19 17 18.5523 17 18V16",stroke:t,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"})]}),gs=({selectedWord:e,wordCloudWords:t=[]})=>{const[o,r]=I.useState([]),[n,s]=I.useState({socialNetwork:"",contactReason:"",sentiment:"",dateFrom:"",dateTo:"",keyword:""}),[a,i]=I.useState(!0),d=["Instagram","Facebook","TikTok","Messenger","YouTube","PlayStore"],c=["Produto","Suporte","Bug","Elogio","ReclamaÃ§Ã£o","Oculto","Outro"],l=["Positivo","Neutro","Negativo"];I.useEffect(()=>{f()},[n]),I.useEffect(()=>{e&&s(y=>({...y,keyword:e}))},[e]);const f=async()=>{var y,w;i(!0);try{const N=await os(n);N.success&&(r(N.data||[]),console.log("ðŸ“Š [Feed] Dados carregados:",{total:((y=N.data)==null?void 0:y.length)||0,hasData:(((w=N.data)==null?void 0:w.length)||0)>0}),N.data&&N.data.length>0&&console.log("ðŸ“… [Feed] Datas recebidas:",N.data.slice(0,3).map(_=>({_id:_._id,clientName:_.clientName,createdAt:_.createdAt,createdAtType:typeof _.createdAt,createdAtParsed:_.createdAt?new Date(_.createdAt).toLocaleString("pt-BR"):null}))))}catch(N){console.error("Erro ao carregar feed:",N)}finally{i(!1)}},p=(y,w)=>{s(N=>({...N,[y]:w}))},h=y=>`card-${y.toLowerCase()}`,m=y=>`sentiment-${(y==null?void 0:y.toLowerCase())||"neutro"}`,b=y=>{if(!y)return"";try{const w=new Date(y);return isNaN(w.getTime())?(console.warn("âš ï¸ [Feed] Data invÃ¡lida:",y),""):new Intl.DateTimeFormat("pt-BR",{timeZone:"America/Sao_Paulo",day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1}).format(w)}catch(w){return console.error("âŒ [Feed] Erro ao formatar data:",w,y),""}},x=o.filter(y=>{if(!n.keyword)return!0;const w=(y.messageText||"").toLowerCase(),N=n.keyword.toLowerCase();return w.includes(N)}),A=x.length,R=o.length,E=()=>{if(x.length===0){alert("NÃ£o hÃ¡ dados para exportar. Aplique filtros ou aguarde o carregamento dos dados.");return}const y=hs(x,n);y.success?console.log(`âœ… Arquivo ${y.filename} exportado com sucesso!`):alert(`Erro ao exportar: ${y.error}`)};return a?u.jsx("div",{className:"velohub-container",children:u.jsx("p",{children:"Carregando feed..."})}):u.jsxs("div",{className:"velohub-container",children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[u.jsxs("h2",{className:"section-title",style:{margin:0},children:[u.jsx(mr,{className:"section-icon"}),"Feed de Atendimento"]}),u.jsxs("button",{onClick:E,disabled:o.length===0,className:"velohub-btn",style:{display:"flex",alignItems:"center",gap:"8px",padding:"10px 20px",backgroundColor:o.length>0?"#1634FF":"#666",color:"white",border:"1px solid rgba(0, 0, 0, 0.1)",borderRadius:"6px",cursor:o.length>0?"pointer":"not-allowed",fontSize:"14px",fontWeight:"500",transition:"all 0.3s ease",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)",opacity:o.length>0?1:.6},onMouseEnter:y=>{o.length>0&&(y.target.style.backgroundColor="#0d28cc",y.target.style.boxShadow="0 4px 8px rgba(0, 0, 0, 0.15)")},onMouseLeave:y=>{o.length>0&&(y.target.style.backgroundColor="#1634FF",y.target.style.boxShadow="0 2px 4px rgba(0, 0, 0, 0.1)")},title:o.length>0?"Exportar histÃ³rico para Excel":"Aguarde o carregamento dos dados",children:[u.jsx(ms,{size:18,color:"#ffffff",strokeColor:"#000000",backgroundColor:"#1634FF",showBackground:!1}),"Exportar Excel"]})]}),u.jsxs("div",{className:"filters-section",children:[u.jsxs("div",{className:"filter-group",children:[u.jsx("label",{children:"Rede Social"}),u.jsxs("select",{value:n.socialNetwork,onChange:y=>p("socialNetwork",y.target.value),className:"velohub-input",children:[u.jsx("option",{value:"",children:"Todas"}),d.map(y=>u.jsx("option",{value:y,children:y},y))]})]}),u.jsxs("div",{className:"filter-group",children:[u.jsx("label",{children:"Motivo"}),u.jsxs("select",{value:n.contactReason,onChange:y=>p("contactReason",y.target.value),className:"velohub-input",children:[u.jsx("option",{value:"",children:"Todos"}),c.map(y=>u.jsx("option",{value:y,children:y},y))]})]}),u.jsxs("div",{className:"filter-group",children:[u.jsx("label",{children:"Sentimento"}),u.jsxs("select",{value:n.sentiment,onChange:y=>p("sentiment",y.target.value),className:"velohub-input",children:[u.jsx("option",{value:"",children:"Todos"}),l.map(y=>u.jsx("option",{value:y,children:y},y))]})]}),u.jsxs("div",{className:"filter-group",children:[u.jsx("label",{children:"Data Inicial"}),u.jsx("input",{type:"date",value:n.dateFrom,onChange:y=>p("dateFrom",y.target.value),className:"velohub-input"})]}),u.jsxs("div",{className:"filter-group",children:[u.jsx("label",{children:"Data Final"}),u.jsx("input",{type:"date",value:n.dateTo,onChange:y=>p("dateTo",y.target.value),className:"velohub-input"})]}),u.jsxs("div",{className:"filter-group",children:[u.jsx("label",{children:"Palavra-Chave (Nuvem)"}),u.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[u.jsx(fs,{value:n.keyword,onChange:y=>p("keyword",y),options:t,placeholder:"Digite ou selecione uma palavra da nuvem"}),n.keyword&&u.jsx("button",{onClick:()=>p("keyword",""),style:{padding:"8px 16px",backgroundColor:"#ff6b6b",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"Limpar"})]})]})]}),n.keyword&&u.jsx("div",{style:{marginBottom:"15px",padding:"10px 15px",backgroundColor:"#1e2130",borderRadius:"4px",border:"1px solid #2d3142"},children:u.jsx("p",{style:{margin:0,color:"#e0e0e0",fontSize:"14px"},children:A===0?`Nenhuma mensagem encontrada com a palavra-chave "${n.keyword}".`:`Mostrando ${A} de ${R} mensagem${R!==1?"s":""} com a palavra-chave "${n.keyword}".`})}),x.length===0?u.jsx("div",{className:"empty-feed",children:u.jsx("p",{children:o.length===0?"O feed estÃ¡ vazio.":`Nenhuma mensagem encontrada com a palavra-chave "${n.keyword}".`})}):u.jsx("div",{className:"feed-list",children:x.map(y=>u.jsxs("div",{className:`velohub-card feed-card ${h(y.socialNetwork)}`,children:[u.jsxs("div",{className:"feed-header",children:[u.jsxs("strong",{children:[y.socialNetwork," | ",y.clientName]}),u.jsx("span",{className:m(y.sentiment),children:y.sentiment||"N/A"})]}),u.jsxs("div",{className:"feed-meta",children:[u.jsx("span",{className:"badge",children:y.contactReason||"N/A"}),y.rating&&u.jsxs("span",{className:"rating",children:["â­ ",y.rating]})]}),u.jsxs("p",{className:"feed-message",children:['"',y.messageText,'"']}),y.link&&u.jsx("a",{href:y.link,target:"_blank",rel:"noopener noreferrer",className:"feed-link",children:"Ver link"}),u.jsx("small",{className:"feed-timestamp",children:b(y.createdAt)})]},y._id))})]})};var Dt;(function(e){e.STRING="string",e.NUMBER="number",e.INTEGER="integer",e.BOOLEAN="boolean",e.ARRAY="array",e.OBJECT="object"})(Dt||(Dt={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Lt;(function(e){e.LANGUAGE_UNSPECIFIED="language_unspecified",e.PYTHON="python"})(Lt||(Lt={}));var Mt;(function(e){e.OUTCOME_UNSPECIFIED="outcome_unspecified",e.OUTCOME_OK="outcome_ok",e.OUTCOME_FAILED="outcome_failed",e.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(Mt||(Mt={}));var Ut;(function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",e.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(Ut||(Ut={}));var $t;(function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"})($t||($t={}));var qt;(function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"})(qt||(qt={}));var Bt;(function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER"})(Bt||(Bt={}));var ve;(function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.SPII="SPII",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.OTHER="OTHER"})(ve||(ve={}));var Gt;(function(e){e.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",e.RETRIEVAL_QUERY="RETRIEVAL_QUERY",e.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",e.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",e.CLASSIFICATION="CLASSIFICATION",e.CLUSTERING="CLUSTERING"})(Gt||(Gt={}));var Ht;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE"})(Ht||(Ht={}));var Wt;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(Wt||(Wt={}));var Vt;(function(e){e.GENERATE_CONTENT="generateContent",e.STREAM_GENERATE_CONTENT="streamGenerateContent",e.COUNT_TOKENS="countTokens",e.EMBED_CONTENT="embedContent",e.BATCH_EMBED_CONTENTS="batchEmbedContents"})(Vt||(Vt={}));ve.RECITATION,ve.SAFETY,ve.LANGUAGE;const de="0.37.0";let zt=!1,Ne,Oo,Po,it,jo,Fo,Io,_o,Do;function ys(e,t={auto:!1}){if(zt)throw new Error(`you must \`import 'groq-sdk/shims/${e.kind}'\` before importing anything else from groq-sdk`);if(Ne)throw new Error(`can't \`import 'groq-sdk/shims/${e.kind}'\` after \`import 'groq-sdk/shims/${Ne}'\``);zt=t.auto,Ne=e.kind,Oo=e.fetch,Po=e.FormData,it=e.File,jo=e.ReadableStream,Fo=e.getMultipartRequestOptions,Io=e.getDefaultAgent,_o=e.fileFromPath,Do=e.isFsReadStream}class ws{constructor(t){this.body=t}get[Symbol.toStringTag](){return"MultipartBody"}}function bs({manuallyImported:e}={}){const t=e?"You may need to use polyfills":"Add one of these imports before your first `import â€¦ from 'groq-sdk'`:\n- `import 'groq-sdk/shims/node'` (if you're running on Node)\n- `import 'groq-sdk/shims/web'` (otherwise)\n";let o,r,n,s;try{o=fetch,r=Request,n=Response,s=Headers}catch(a){throw new Error(`this environment is missing the following Web Fetch API type: ${a.message}. ${t}`)}return{kind:"web",fetch:o,Request:r,Response:n,Headers:s,FormData:typeof FormData<"u"?FormData:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${t}`)}},Blob:typeof Blob<"u"?Blob:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${t}`)}},File:typeof File<"u"?File:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${t}`)}},ReadableStream:typeof ReadableStream<"u"?ReadableStream:class{constructor(){throw new Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${t}`)}},getMultipartRequestOptions:async(a,i)=>({...i,body:new ws(a)}),getDefaultAgent:a=>{},fileFromPath:()=>{throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/groq/groq-typescript#file-uploads")},isFsReadStream:a=>!1}}const Lo=()=>{Ne||ys(bs(),{auto:!0})};Lo();class ee extends Error{}class J extends ee{constructor(t,o,r,n){super(`${J.makeMessage(t,o,r)}`),this.status=t,this.headers=n,this.error=o}static makeMessage(t,o,r){const n=o!=null&&o.message?typeof o.message=="string"?o.message:JSON.stringify(o.message):o?JSON.stringify(o):r;return t&&n?`${t} ${n}`:t?`${t} status code (no body)`:n||"(no status code or body)"}static generate(t,o,r,n){if(!t||!n)return new ze({message:r,cause:dt(o)});const s=o;return t===400?new Uo(t,s,r,n):t===401?new $o(t,s,r,n):t===403?new qo(t,s,r,n):t===404?new Bo(t,s,r,n):t===409?new Go(t,s,r,n):t===422?new Ho(t,s,r,n):t===429?new Wo(t,s,r,n):t>=500?new Vo(t,s,r,n):new J(t,s,r,n)}}class ct extends J{constructor({message:t}={}){super(void 0,void 0,t||"Request was aborted.",void 0)}}class ze extends J{constructor({message:t,cause:o}){super(void 0,void 0,t||"Connection error.",void 0),o&&(this.cause=o)}}class Mo extends ze{constructor({message:t}={}){super({message:t??"Request timed out."})}}class Uo extends J{}class $o extends J{}class qo extends J{}class Bo extends J{}class Go extends J{}class Ho extends J{}class Wo extends J{}class Vo extends J{}class ue{constructor(t,o){this.iterator=t,this.controller=o}static fromSSEResponse(t,o){let r=!1;const n=new xs;async function*s(){if(!t.body)throw o.abort(),new ee("Attempted to iterate over a response with no body");const i=new le,d=Kt(t.body);for await(const c of d)for(const l of i.decode(c)){const f=n.decode(l);f&&(yield f)}for(const c of i.flush()){const l=n.decode(c);l&&(yield l)}}async function*a(){if(r)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let i=!1;try{for await(const d of s())if(!i){if(d.data.startsWith("[DONE]")){i=!0;continue}if(d.event===null||d.event==="error"){let c;try{c=JSON.parse(d.data)}catch(l){throw console.error("Could not parse message into JSON:",d.data),console.error("From chunk:",d.raw),l}if(c&&c.error)throw new J(c.error.status_code,c.error,c.error.message,void 0);yield c}}i=!0}catch(d){if(d instanceof Error&&d.name==="AbortError")return;throw d}finally{i||o.abort()}}return new ue(a,o)}static fromReadableStream(t,o){let r=!1;async function*n(){const a=new le,i=Kt(t);for await(const d of i)for(const c of a.decode(d))yield c;for(const d of a.flush())yield d}async function*s(){if(r)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let a=!1;try{for await(const i of n())a||i&&(yield JSON.parse(i));a=!0}catch(i){if(i instanceof Error&&i.name==="AbortError")return;throw i}finally{a||o.abort()}}return new ue(s,o)}[Symbol.asyncIterator](){return this.iterator()}tee(){const t=[],o=[],r=this.iterator(),n=s=>({next:()=>{if(s.length===0){const a=r.next();t.push(a),o.push(a)}return s.shift()}});return[new ue(()=>n(t),this.controller),new ue(()=>n(o),this.controller)]}toReadableStream(){const t=this;let o;const r=new TextEncoder;return new jo({async start(){o=t[Symbol.asyncIterator]()},async pull(n){try{const{value:s,done:a}=await o.next();if(a)return n.close();const i=r.encode(JSON.stringify(s)+`
`);n.enqueue(i)}catch(s){n.error(s)}},async cancel(){var n;await((n=o.return)==null?void 0:n.call(o))}})}}class xs{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(t){if(t.endsWith("\r")&&(t=t.substring(0,t.length-1)),!t){if(!this.event&&!this.data.length)return null;const s={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],s}if(this.chunks.push(t),t.startsWith(":"))return null;let[o,r,n]=Es(t,":");return n.startsWith(" ")&&(n=n.substring(1)),o==="event"?this.event=n:o==="data"&&this.data.push(n),null}}class le{constructor(){this.buffer=[],this.trailingCR=!1}decode(t){let o=this.decodeText(t);if(this.trailingCR&&(o="\r"+o,this.trailingCR=!1),o.endsWith("\r")&&(this.trailingCR=!0,o=o.slice(0,-1)),!o)return[];const r=le.NEWLINE_CHARS.has(o[o.length-1]||"");let n=o.split(le.NEWLINE_REGEXP);return n.length===1&&!r?(this.buffer.push(n[0]),[]):(this.buffer.length>0&&(n=[this.buffer.join("")+n[0],...n.slice(1)],this.buffer=[]),r||(this.buffer=[n.pop()||""]),n)}decodeText(t){if(t==null)return"";if(typeof t=="string")return t;if(typeof Buffer<"u"){if(t instanceof Buffer)return t.toString();if(t instanceof Uint8Array)return Buffer.from(t).toString();throw new ee(`Unexpected: received non-Uint8Array (${t.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if(typeof TextDecoder<"u"){if(t instanceof Uint8Array||t instanceof ArrayBuffer)return this.textDecoder??(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(t);throw new ee(`Unexpected: received non-Uint8Array/ArrayBuffer (${t.constructor.name}) in a web platform. Please report this error.`)}throw new ee("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){if(!this.buffer.length&&!this.trailingCR)return[];const t=[this.buffer.join("")];return this.buffer=[],this.trailingCR=!1,t}}le.NEWLINE_CHARS=new Set([`
`,"\r","\v","\f","","","","Â…","\u2028","\u2029"]);le.NEWLINE_REGEXP=/\r\n|[\n\r\x0b\x0c\x1c\x1d\x1e\x85\u2028\u2029]/g;function Es(e,t){const o=e.indexOf(t);return o!==-1?[e.substring(0,o),t,e.substring(o+t.length)]:[e,"",""]}function Kt(e){if(e[Symbol.asyncIterator])return e;const t=e.getReader();return{async next(){try{const o=await t.read();return o!=null&&o.done&&t.releaseLock(),o}catch(o){throw t.releaseLock(),o}},async return(){const o=t.cancel();return t.releaseLock(),await o,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}const zo=e=>e!=null&&typeof e=="object"&&typeof e.url=="string"&&typeof e.blob=="function",Ko=e=>e!=null&&typeof e=="object"&&typeof e.name=="string"&&typeof e.lastModified=="number"&&Ke(e),Ke=e=>e!=null&&typeof e=="object"&&typeof e.size=="number"&&typeof e.type=="string"&&typeof e.text=="function"&&typeof e.slice=="function"&&typeof e.arrayBuffer=="function",Rs=e=>Ko(e)||zo(e)||Do(e);async function Xo(e,t,o){var n;if(e=await e,Ko(e))return e;if(zo(e)){const s=await e.blob();t||(t=new URL(e.url).pathname.split(/[\\/]/).pop()??"unknown_file");const a=Ke(s)?[await s.arrayBuffer()]:[s];return new it(a,t,o)}const r=await As(e);if(t||(t=vs(e)??"unknown_file"),!(o!=null&&o.type)){const s=(n=r[0])==null?void 0:n.type;typeof s=="string"&&(o={...o,type:s})}return new it(r,t,o)}async function As(e){var o;let t=[];if(typeof e=="string"||ArrayBuffer.isView(e)||e instanceof ArrayBuffer)t.push(e);else if(Ke(e))t.push(await e.arrayBuffer());else if(Ns(e))for await(const r of e)t.push(r);else throw new Error(`Unexpected data type: ${typeof e}; constructor: ${(o=e==null?void 0:e.constructor)==null?void 0:o.name}; props: ${Ss(e)}`);return t}function Ss(e){return`[${Object.getOwnPropertyNames(e).map(o=>`"${o}"`).join(", ")}]`}function vs(e){var t;return Ze(e.name)||Ze(e.filename)||((t=Ze(e.path))==null?void 0:t.split(/[\\/]/).pop())}const Ze=e=>{if(typeof e=="string")return e;if(typeof Buffer<"u"&&e instanceof Buffer)return String(e)},Ns=e=>e!=null&&typeof e=="object"&&typeof e[Symbol.asyncIterator]=="function",Xt=e=>e&&typeof e=="object"&&e.body&&e[Symbol.toStringTag]==="MultipartBody",mt=async e=>{const t=await Ts(e.body);return Fo(t,e)},Ts=async e=>{const t=new Po;return await Promise.all(Object.entries(e||{}).map(([o,r])=>lt(t,o,r))),t},lt=async(e,t,o)=>{if(o!==void 0){if(o==null)throw new TypeError(`Received null for "${t}"; to pass null in FormData, you must use the string 'null'`);if(typeof o=="string"||typeof o=="number"||typeof o=="boolean")e.append(t,String(o));else if(Rs(o)){const r=await Xo(o);e.append(t,r)}else if(Array.isArray(o))await Promise.all(o.map(r=>lt(e,t+"[]",r)));else if(typeof o=="object")await Promise.all(Object.entries(o).map(([r,n])=>lt(e,`${t}[${r}]`,n)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${o} instead`)}};var fe={},Cs=function(e,t,o,r,n){if(typeof t=="function"?e!==t||!0:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t.set(e,o),o},ks=function(e,t,o,r){if(typeof t=="function"?e!==t||!0:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t.get(e)},$e;Lo();async function Jo(e){var a;const{response:t}=e;if(e.options.stream)return pe("response",t.status,t.url,t.headers,t.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(t,e.controller):ue.fromSSEResponse(t,e.controller);if(t.status===204)return null;if(e.options.__binaryResponse)return t;const o=t.headers.get("content-type"),r=(a=o==null?void 0:o.split(";")[0])==null?void 0:a.trim();if((r==null?void 0:r.includes("application/json"))||(r==null?void 0:r.endsWith("+json"))){const i=await t.json();return pe("response",t.status,t.url,t.headers,i),i}const s=await t.text();return pe("response",t.status,t.url,t.headers,s),s}class Xe extends Promise{constructor(t,o=Jo){super(r=>{r(null)}),this.responsePromise=t,this.parseResponse=o}_thenUnwrap(t){return new Xe(this.responsePromise,async o=>t(await this.parseResponse(o),o))}asResponse(){return this.responsePromise.then(t=>t.response)}async withResponse(){const[t,o]=await Promise.all([this.parse(),this.asResponse()]);return{data:t,response:o}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(t,o){return this.parse().then(t,o)}catch(t){return this.parse().catch(t)}finally(t){return this.parse().finally(t)}}class Os{constructor({baseURL:t,baseURLOverridden:o,maxRetries:r=2,timeout:n=6e4,httpAgent:s,fetch:a}){$e.set(this,void 0),this.baseURL=t,Cs(this,$e,o),this.maxRetries=et("maxRetries",r),this.timeout=et("timeout",n),this.httpAgent=s,this.fetch=a??Oo}authHeaders(t){return{}}defaultHeaders(t){return{Accept:"application/json",...["head","get"].includes(t.method)?{}:{"Content-Type":"application/json"},"User-Agent":this.getUserAgent(),..._s(),...this.authHeaders(t)}}validateHeaders(t,o){}defaultIdempotencyKey(){return`stainless-node-retry-${Bs()}`}get(t,o){return this.methodRequest("get",t,o)}post(t,o){return this.methodRequest("post",t,o)}patch(t,o){return this.methodRequest("patch",t,o)}put(t,o){return this.methodRequest("put",t,o)}delete(t,o){return this.methodRequest("delete",t,o)}methodRequest(t,o,r){return this.request(Promise.resolve(r).then(async n=>{const s=n&&Ke(n==null?void 0:n.body)?new DataView(await n.body.arrayBuffer()):(n==null?void 0:n.body)instanceof DataView?n.body:(n==null?void 0:n.body)instanceof ArrayBuffer?new DataView(n.body):n&&ArrayBuffer.isView(n==null?void 0:n.body)?new DataView(n.body.buffer):n==null?void 0:n.body;return{method:t,path:o,...n,body:s}}))}getAPIList(t,o,r){return this.requestAPIList(o,{method:"get",path:t,...r})}calculateContentLength(t){if(typeof t=="string"){if(typeof Buffer<"u")return Buffer.byteLength(t,"utf8").toString();if(typeof TextEncoder<"u")return new TextEncoder().encode(t).length.toString()}else if(ArrayBuffer.isView(t))return t.byteLength.toString();return null}async buildRequest(t,{retryCount:o=0}={}){var x;const r={...t},{method:n,path:s,query:a,defaultBaseURL:i,headers:d={}}=r,c=ArrayBuffer.isView(r.body)||r.__binaryRequest&&typeof r.body=="string"?r.body:Xt(r.body)?r.body.body:r.body?JSON.stringify(r.body,null,2):null,l=this.calculateContentLength(c),f=this.buildURL(s,a,i);"timeout"in r&&et("timeout",r.timeout),r.timeout=r.timeout??this.timeout;const p=r.httpAgent??this.httpAgent??Io(f),h=r.timeout+1e3;typeof((x=p==null?void 0:p.options)==null?void 0:x.timeout)=="number"&&h>(p.options.timeout??0)&&(p.options.timeout=h),this.idempotencyHeader&&n!=="get"&&(t.idempotencyKey||(t.idempotencyKey=this.defaultIdempotencyKey()),d[this.idempotencyHeader]=t.idempotencyKey);const m=this.buildHeaders({options:r,headers:d,contentLength:l,retryCount:o});return{req:{method:n,...c&&{body:c},headers:m,...p&&{agent:p},signal:r.signal??null},url:f,timeout:r.timeout}}buildHeaders({options:t,headers:o,contentLength:r,retryCount:n}){const s={};r&&(s["content-length"]=r);const a=this.defaultHeaders(t);return eo(s,a),eo(s,o),Xt(t.body)&&Ne!=="node"&&delete s["content-type"],Ie(a,"x-stainless-retry-count")===void 0&&Ie(o,"x-stainless-retry-count")===void 0&&(s["x-stainless-retry-count"]=String(n)),Ie(a,"x-stainless-timeout")===void 0&&Ie(o,"x-stainless-timeout")===void 0&&t.timeout&&(s["x-stainless-timeout"]=String(Math.trunc(t.timeout/1e3))),this.validateHeaders(s,o),s}async prepareOptions(t){}async prepareRequest(t,{url:o,options:r}){}parseHeaders(t){return t?Symbol.iterator in t?Object.fromEntries(Array.from(t).map(o=>[...o])):{...t}:{}}makeStatusError(t,o,r,n){return J.generate(t,o,r,n)}request(t,o=null){return new Xe(this.makeRequest(t,o))}async makeRequest(t,o){var f,p;const r=await t,n=r.maxRetries??this.maxRetries;o==null&&(o=n),await this.prepareOptions(r);const{req:s,url:a,timeout:i}=await this.buildRequest(r,{retryCount:n-o});if(await this.prepareRequest(s,{url:a,options:r}),pe("request",a,r,s.headers),(f=r.signal)!=null&&f.aborted)throw new ct;const d=new AbortController,c=await this.fetchWithTimeout(a,s,i,d).catch(dt);if(c instanceof Error){if((p=r.signal)!=null&&p.aborted)throw new ct;if(o)return this.retryRequest(r,o);throw c.name==="AbortError"?new Mo:new ze({cause:c})}const l=js(c.headers);if(!c.ok){if(o&&this.shouldRetry(c)){const R=`retrying, ${o} attempts remaining`;return pe(`response (error; ${R})`,c.status,a,l),this.retryRequest(r,o,l)}const h=await c.text().catch(R=>dt(R).message),m=Ds(h),b=m?void 0:h;throw pe(`response (error; ${o?"(error; no more retries left)":"(error; not retryable)"})`,c.status,a,l,b),this.makeStatusError(c.status,m,b,l)}return{response:c,options:r,controller:d}}requestAPIList(t,o){const r=this.makeRequest(o,null);return new Ps(this,r,t)}buildURL(t,o,r){const n=!ks(this,$e)&&r||this.baseURL,s=Ms(t)?new URL(t):new URL(n+(n.endsWith("/")&&t.startsWith("/")?t.slice(1):t)),a=this.defaultQuery();return $s(a)||(o={...a,...o}),typeof o=="object"&&o&&!Array.isArray(o)&&(s.search=this.stringifyQuery(o)),s.toString()}stringifyQuery(t){return Object.entries(t).filter(([o,r])=>typeof r<"u").map(([o,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(o)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(o)}=`;throw new ee(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}async fetchWithTimeout(t,o,r,n){const{signal:s,...a}=o||{};s&&s.addEventListener("abort",()=>n.abort());const i=setTimeout(()=>n.abort(),r),d={signal:n.signal,...a};return d.method&&(d.method=d.method.toUpperCase()),this.fetch.call(void 0,t,d).finally(()=>{clearTimeout(i)})}shouldRetry(t){const o=t.headers.get("x-should-retry");return o==="true"?!0:o==="false"?!1:t.status===408||t.status===409||t.status===429||t.status>=500}async retryRequest(t,o,r){let n;const s=r==null?void 0:r["retry-after-ms"];if(s){const i=parseFloat(s);Number.isNaN(i)||(n=i)}const a=r==null?void 0:r["retry-after"];if(a&&!n){const i=parseFloat(a);Number.isNaN(i)?n=Date.parse(a)-Date.now():n=i*1e3}if(!(n&&0<=n&&n<60*1e3)){const i=t.maxRetries??this.maxRetries;n=this.calculateDefaultRetryTimeoutMillis(o,i)}return await Us(n),this.makeRequest(t,o-1)}calculateDefaultRetryTimeoutMillis(t,o){const s=o-t,a=Math.min(.5*Math.pow(2,s),8),i=1-Math.random()*.25;return a*i*1e3}getUserAgent(){return`${this.constructor.name}/JS ${de}`}}$e=new WeakMap;class Ps extends Xe{constructor(t,o,r){super(o,async n=>new r(t,n.response,await Jo(n),n.options))}async*[Symbol.asyncIterator](){const t=await this;for await(const o of t)yield o}}const js=e=>new Proxy(Object.fromEntries(e.entries()),{get(t,o){const r=o.toString();return t[r.toLowerCase()]||t[r]}}),Fs=()=>{var t;if(typeof Deno<"u"&&Deno.build!=null)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":de,"X-Stainless-OS":Yt(Deno.build.os),"X-Stainless-Arch":Jt(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:((t=Deno.version)==null?void 0:t.deno)??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":de,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if(Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":de,"X-Stainless-OS":Yt(process.platform),"X-Stainless-Arch":Jt(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};const e=Is();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":de,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":de,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function Is(){if(typeof navigator>"u"||!navigator)return null;const e=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:t,pattern:o}of e){const r=o.exec(navigator.userAgent);if(r){const n=r[1]||0,s=r[2]||0,a=r[3]||0;return{browser:t,version:`${n}.${s}.${a}`}}}return null}const Jt=e=>e==="x32"?"x32":e==="x86_64"||e==="x64"?"x64":e==="arm"?"arm":e==="aarch64"||e==="arm64"?"arm64":e?`other:${e}`:"unknown",Yt=e=>(e=e.toLowerCase(),e.includes("ios")?"iOS":e==="android"?"Android":e==="darwin"?"MacOS":e==="win32"?"Windows":e==="freebsd"?"FreeBSD":e==="openbsd"?"OpenBSD":e==="linux"?"Linux":e?`Other:${e}`:"Unknown");let Qt;const _s=()=>Qt??(Qt=Fs()),Ds=e=>{try{return JSON.parse(e)}catch{return}},Ls=/^[a-z][a-z0-9+.-]*:/i,Ms=e=>Ls.test(e),Us=e=>new Promise(t=>setTimeout(t,e)),et=(e,t)=>{if(typeof t!="number"||!Number.isInteger(t))throw new ee(`${e} must be an integer`);if(t<0)throw new ee(`${e} must be a positive integer`);return t},dt=e=>{if(e instanceof Error)return e;if(typeof e=="object"&&e!==null)try{return new Error(JSON.stringify(e))}catch{}return new Error(e)},Zt=e=>{var t,o,r,n;if(typeof process<"u")return((t=fe==null?void 0:fe[e])==null?void 0:t.trim())??void 0;if(typeof Deno<"u")return(n=(r=(o=Deno.env)==null?void 0:o.get)==null?void 0:r.call(o,e))==null?void 0:n.trim()};function $s(e){if(!e)return!0;for(const t in e)return!1;return!0}function qs(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function eo(e,t){for(const o in t){if(!qs(t,o))continue;const r=o.toLowerCase();if(!r)continue;const n=t[o];n===null?delete e[r]:n!==void 0&&(e[r]=n)}}function pe(e,...t){typeof process<"u"&&(fe==null?void 0:fe.DEBUG)==="true"&&console.log(`Groq:DEBUG:${e}`,...t)}const Bs=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)}),Gs=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u",Hs=e=>typeof(e==null?void 0:e.get)=="function",Ie=(e,t)=>{var r;const o=t.toLowerCase();if(Hs(e)){const n=((r=t[0])==null?void 0:r.toUpperCase())+t.substring(1).replace(/([^\w])(\w)/g,(s,a,i)=>a+i.toUpperCase());for(const s of[t,o,t.toUpperCase(),n]){const a=e.get(s);if(a)return a}}for(const[n,s]of Object.entries(e))if(n.toLowerCase()===o)return Array.isArray(s)?(s.length<=1||console.warn(`Received ${s.length} entries for the ${t} header, using the first entry.`),s[0]):s};class oe{constructor(t){this._client=t}}class Yo extends oe{create(t,o){return this._client.post("/openai/v1/audio/speech",{body:t,...o,headers:{Accept:"audio/wav",...o==null?void 0:o.headers},__binaryResponse:!0})}}class Qo extends oe{create(t,o){return this._client.post("/openai/v1/audio/transcriptions",mt({body:t,...o}))}}class Zo extends oe{create(t,o){return this._client.post("/openai/v1/audio/translations",mt({body:t,...o}))}}class Pe extends oe{constructor(){super(...arguments),this.speech=new Yo(this._client),this.transcriptions=new Qo(this._client),this.translations=new Zo(this._client)}}Pe.Speech=Yo;Pe.Transcriptions=Qo;Pe.Translations=Zo;class er extends oe{create(t,o){return this._client.post("/openai/v1/batches",{body:t,...o})}retrieve(t,o){return this._client.get(`/openai/v1/batches/${t}`,o)}list(t){return this._client.get("/openai/v1/batches",t)}cancel(t,o){return this._client.post(`/openai/v1/batches/${t}/cancel`,o)}}let tr=class extends oe{create(t,o){return this._client.post("/openai/v1/chat/completions",{body:t,...o,stream:t.stream??!1})}};class gt extends oe{constructor(){super(...arguments),this.completions=new tr(this._client)}}gt.Completions=tr;class or extends oe{}class rr extends oe{create(t,o){return this._client.post("/openai/v1/embeddings",{body:t,...o})}}class nr extends oe{create(t,o){return this._client.post("/openai/v1/files",mt({body:t,...o}))}list(t){return this._client.get("/openai/v1/files",t)}delete(t,o){return this._client.delete(`/openai/v1/files/${t}`,o)}content(t,o){return this._client.get(`/openai/v1/files/${t}/content`,{...o,headers:{Accept:"application/octet-stream",...o==null?void 0:o.headers},__binaryResponse:!0})}info(t,o){return this._client.get(`/openai/v1/files/${t}`,o)}}class sr extends oe{retrieve(t,o){return this._client.get(`/openai/v1/models/${t}`,o)}list(t){return this._client.get("/openai/v1/models",t)}delete(t,o){return this._client.delete(`/openai/v1/models/${t}`,o)}}var ar,ir;class M extends Os{constructor({baseURL:t=Zt("GROQ_BASE_URL"),apiKey:o=Zt("GROQ_API_KEY"),...r}={}){if(o===void 0)throw new ee("The GROQ_API_KEY environment variable is missing or empty; either provide it, or instantiate the Groq client with an apiKey option, like new Groq({ apiKey: 'My API Key' }).");const n={apiKey:o,...r,baseURL:t||"https://api.groq.com"};if(!n.dangerouslyAllowBrowser&&Gs())throw new ee(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new Groq({ apiKey, dangerouslyAllowBrowser: true })`);super({baseURL:n.baseURL,baseURLOverridden:t?t!=="https://api.groq.com":!1,timeout:n.timeout??6e4,httpAgent:n.httpAgent,maxRetries:n.maxRetries,fetch:n.fetch}),ar.add(this),this.completions=new or(this),this.chat=new gt(this),this.embeddings=new rr(this),this.audio=new Pe(this),this.models=new sr(this),this.batches=new er(this),this.files=new nr(this),this._options=n,this.apiKey=o}defaultQuery(){return this._options.defaultQuery}defaultHeaders(t){return{...super.defaultHeaders(t),...this._options.defaultHeaders}}authHeaders(t){return{Authorization:`Bearer ${this.apiKey}`}}}ir=M,ar=new WeakSet;M.Groq=ir;M.DEFAULT_TIMEOUT=6e4;M.GroqError=ee;M.APIError=J;M.APIConnectionError=ze;M.APIConnectionTimeoutError=Mo;M.APIUserAbortError=ct;M.NotFoundError=Bo;M.ConflictError=Go;M.RateLimitError=Wo;M.BadRequestError=Uo;M.AuthenticationError=$o;M.InternalServerError=Vo;M.PermissionDeniedError=qo;M.UnprocessableEntityError=Ho;M.toFile=Xo;M.fileFromPath=_o;M.Completions=or;M.Chat=gt;M.Embeddings=rr;M.Audio=Pe;M.Models=sr;M.Batches=er;M.Files=nr;const Ee=void 0,Ws=()=>(console.warn("âš ï¸ VITE_GEMINI_API_KEY nÃ£o configurada"),console.warn("âš ï¸ Verifique se a variÃ¡vel de ambiente VITE_GEMINI_API_KEY estÃ¡ definida"),null),Vs=()=>M?(console.error("âŒ Groq API Key nÃ£o encontrada"),null):(console.error("âŒ Groq SDK nÃ£o estÃ¡ disponÃ­vel. Verifique se o pacote groq-sdk estÃ¡ instalado."),null),zs=async e=>{var t,o;try{console.log("ðŸ”„ Chamando backend Groq para gerar relatÃ³rio...");const r=await ne.post("/report/groq",{prompt:e});if(r.data.success)return r.data.data;throw new Error(r.data.error||"Erro ao gerar relatÃ³rio com Groq")}catch(r){console.error("âŒ Erro ao gerar relatÃ³rio com Groq via backend:",r);const n=((o=(t=r.response)==null?void 0:t.data)==null?void 0:o.error)||r.message||"Erro desconhecido ao chamar backend Groq";throw new Error(n)}},Ks=async(e,t=3,o=5e3)=>{for(let r=0;r<t;r++)try{return await e()}catch(n){const s=n.message||String(n),i=(n.status||n.statusCode||n.response&&n.response.status)===429||s&&(s.includes("429")||s.includes("quota")||s.includes("Quota exceeded")||s.includes("rate limit")||s.includes("Rate limit"));let d=o*Math.pow(2,r);try{const c=JSON.stringify(n),l=c.match(/retry.*?(\d+)\s*(?:s|sec|second)/i)||c.match(/wait.*?(\d+)\s*(?:s|sec|second)/i)||c.match(/(\d+)\s*(?:s|sec|second).*?retry/i);if(l){const f=parseInt(l[1])*1e3;f>d&&(d=f)}}catch{}if(i&&r<t-1){const c=Math.ceil(d/1e3),l=Math.ceil(c/60);console.log(`âš ï¸ Quota excedida. Aguardando ${c}s (${l} min) antes de tentar novamente... (tentativa ${r+1}/${t})`),await new Promise(f=>setTimeout(f,d));continue}throw n}},Xs=async(e,t={})=>{var o,r,n,s,a,i,d,c;try{if(!e||typeof e=="string"&&e.trim().length===0)return{success:!1,error:"Dados invÃ¡lidos para gerar relatÃ³rio"};console.log("ðŸ”„ Tentando gerar relatÃ³rio via backend...");try{const S=await ne.post("/report",{data:e,filters:t});if(S.data.success)return console.log("âœ… RelatÃ³rio gerado com sucesso via backend"),S.data}catch(S){console.warn("âš ï¸ Backend nÃ£o disponÃ­vel ou falhou, tentando frontend:",S.message)}console.log("ðŸ”„ Inicializando Gemini AI no frontend...");const l=Ws();if(!l)return{success:!1,error:"Gemini AI nÃ£o configurado. Verifique VITE_GEMINI_API_KEY"};let f=e;Array.isArray(e)&&e.length>50&&(console.log(`âš ï¸ Limitando dados de ${e.length} para 50 itens para reduzir tokens e evitar quota`),f=e.slice(0,50));let p="",h={total:0,socialNetworks:{},sentiments:{},contactReasons:{},ratings:[]};if(typeof f=="string")p=f.substring(0,2e3);else if(Array.isArray(f)){h.total=f.length;const S=f.map((v,P)=>{if(typeof v=="object"){const $=(v.socialNetwork||"N/A").trim(),B=(v.sentiment||"N/A").trim(),V=(v.contactReason||"N/A").trim(),K=v.rating||null;h.socialNetworks[$]||(h.socialNetworks[$]=0),h.socialNetworks[$]=(h.socialNetworks[$]||0)+1,h.sentiments[B]=(h.sentiments[B]||0)+1,h.contactReasons[V]=(h.contactReasons[V]||0)+1,K!=null&&h.ratings.push(Number(K));const we=(v.messageText||"").substring(0,100);return`${P+1}. Rede: ${$} | Sentimento: ${B} | Motivo: ${V} | Rating: ${K||"N/A"} | Mensagem: ${we}`}return String(v).substring(0,100)});console.log("ðŸ“Š [geminiService] Contagem de redes apÃ³s processamento:",h.socialNetworks),console.log("ðŸ“Š [geminiService] Redes Ãºnicas encontradas:",Object.keys(h.socialNetworks)),p=S.join(`
`),p.length>4e3&&(console.log(`âš ï¸ Resumo muito longo (${p.length} chars), truncando para 4000 caracteres`),p=p.substring(0,4e3)+"...")}else typeof f=="object"?p=JSON.stringify(f,null,2).substring(0,2e3):p=String(f).substring(0,2e3);const m=Object.keys(h.socialNetworks).length>0?Object.keys(h.socialNetworks).reduce((S,v)=>h.socialNetworks[S]>h.socialNetworks[v]?S:v):"N/A",b=Object.keys(h.sentiments).length>0?Object.keys(h.sentiments).reduce((S,v)=>h.sentiments[S]>h.sentiments[v]?S:v):"N/A",x=Object.keys(h.contactReasons).length>0?Object.keys(h.contactReasons).reduce((S,v)=>h.contactReasons[S]>h.contactReasons[v]?S:v):"N/A",A=h.ratings.length>0?(h.ratings.reduce((S,v)=>S+v,0)/h.ratings.length).toFixed(2):"N/A",R=h.sentiments.Positivo||0,E=h.sentiments.Neutro||0,y=h.sentiments.Negativo||0,w=h.total,N=w>0?(R/w*100).toFixed(1):"0.0",_=w>0?(E/w*100).toFixed(1):"0.0",j=w>0?(y/w*100).toFixed(1):"0.0",C=Object.keys(h.socialNetworks).sort(),D=t&&t.socialNetwork&&t.socialNetwork.trim()!=="",T=D?t.socialNetwork:null;console.log("ðŸ” [geminiService] AnÃ¡lise de redes sociais:",{dataStatsSocialNetworks:h.socialNetworks,networksInData:C,hasFilter:D,filteredNetwork:T,totalItems:f.length,redesUnicasNosDados:Array.isArray(f)?[...new Set(f.map(S=>S.socialNetwork).filter(Boolean))]:[]});const k={};Array.isArray(f)&&C.forEach(S=>{const v=f.filter(K=>(K.socialNetwork||"N/A").trim()===S),P=v.length,$=v.filter(K=>(K.sentiment||"N/A").trim()==="Positivo").length,B=v.filter(K=>(K.sentiment||"N/A").trim()==="Neutro").length,V=v.filter(K=>(K.sentiment||"N/A").trim()==="Negativo").length;k[S]={total:P,positive:$,neutral:B,negative:V,positivePercent:P>0?($/P*100).toFixed(1):"0.0",neutralPercent:P>0?(B/P*100).toFixed(1):"0.0",negativePercent:P>0?(V/P*100).toFixed(1):"0.0"},P>0&&console.log(`ðŸ“Š [geminiService] Stats para ${S}:`,k[S])}),console.log("ðŸ“Š [geminiService] EstatÃ­sticas por rede social:",k);let U=C,z="";D&&T?(U=[T],z=`Analise exclusivamente a plataforma ${T}. NÃ£o mencione outras redes sociais que nÃ£o estejam presentes nos dados filtrados.`,console.log("âœ… [geminiService] Modo filtrado - Rede a analisar:",U)):(z=`Analise todas as redes sociais presentes nos dados: ${U.join(", ")}. Para cada rede social, apresente os dados de sentimento especÃ­ficos dessa rede.`,console.log('âœ… [geminiService] Modo "Todas as redes" - Redes a analisar:',U));const W=`Contexto: VocÃª Ã© um Especialista em Customer Experience e Data Analytics. Sua tarefa Ã© transformar dados brutos de interaÃ§Ãµes (JSON/Bancos de Dados) em um RelatÃ³rio Executivo de alto nÃ­vel para a gestÃ£o.

InstruÃ§Ãµes de FormataÃ§Ã£o:
- Use Markdown com hierarquia clara seguindo padrÃµes ABNT
- Evite uso excessivo de asteriscos (*) e sÃ­mbolos de marcaÃ§Ã£o desnecessÃ¡rios
- Use listas simples para garantir legibilidade e evitar quebras de pÃ¡gina inadequadas
- Tom: Profissional, analÃ­tico e humano. Evite "encher linguiÃ§a"
- Foco: Insights acionÃ¡veis (o que os dados nos dizem para fazer?)

DADOS COLETADOS:
Total de interaÃ§Ãµes: ${h.total}
Rede mais ativa: ${m}
Sentimento predominante: ${b}
Motivo mais frequente: ${x}
MÃ©dia de avaliaÃ§Ã£o Playstore: ${A}
Redes sociais presentes nos dados: ${U.join(", ")}

DETALHES DAS INTERAÃ‡Ã•ES:
${p}

ESTRUTURA OBRIGATÃ“RIA DO RELATÃ“RIO:
## 1. ðŸ” VisÃ£o Geral (DiagnÃ³stico Situacional)
${D&&T?`AnÃ¡lise estratÃ©gica baseada no monitoramento de interaÃ§Ãµes da rede social ${T}:`:"AnÃ¡lise estratÃ©gica baseada no monitoramento de interaÃ§Ãµes do perfil selecionado:"}
- Total interaÃ§Ãµes: ${h.total}
${D&&T?`- Rede Social Analisada: ${T}`:`- Redes Sociais Analisadas: ${U.join(", ")}`}
- â­ MÃ©dia de avaliaÃ§Ã£o: ${A} (PlayStore)
- ðŸŽ­ Feeling geral: ${b}
- ðŸ“ˆ Sendo:
    - Positivo: ${N}% (${R} interaÃ§Ãµes)
    - Neutro: ${_}% (${E} interaÃ§Ãµes)
    - Negativo: ${j}% (${y} interaÃ§Ãµes)

[QUEBRA DE PÃGINA - Inicie a prÃ³xima seÃ§Ã£o em uma nova pÃ¡gina]

## 2. ðŸ¥§ GrÃ¡ficos de AnÃ¡lise de Sentimento

${D&&T?`Rede Social: ${T}

- Positivo: ${((o=k[T])==null?void 0:o.positivePercent)||"0.0"}% (${((r=k[T])==null?void 0:r.positive)||0} interaÃ§Ãµes)
- Neutro: ${((n=k[T])==null?void 0:n.neutralPercent)||"0.0"}% (${((s=k[T])==null?void 0:s.neutral)||0} interaÃ§Ãµes)
- Negativo: ${((a=k[T])==null?void 0:a.negativePercent)||"0.0"}% (${((i=k[T])==null?void 0:i.negative)||0} interaÃ§Ãµes)

GrÃ¡fico: O grÃ¡fico de pizza mostra a distribuiÃ§Ã£o de sentimentos da rede social ${T}, com percentuais e quantidades de interaÃ§Ãµes para cada sentimento (Positivo, Neutro, Negativo).`:(()=>{const S=U.map(v=>{const P=k[v]||{positivePercent:"0.0",neutralPercent:"0.0",negativePercent:"0.0",positive:0,neutral:0,negative:0};return`Rede Social: ${v}

- Positivo: ${P.positivePercent}% (${P.positive} interaÃ§Ãµes)
- Neutro: ${P.neutralPercent}% (${P.neutral} interaÃ§Ãµes)
- Negativo: ${P.negativePercent}% (${P.negative} interaÃ§Ãµes)`}).join(`

`);return console.log("ðŸ“ [geminiService] Redes incluÃ­das no prompt de grÃ¡ficos:",{networksToAnalyze:U,quantidadeRedes:U.length,redesComStats:Object.keys(k),promptLength:S.length}),S+`

GrÃ¡fico: O grÃ¡fico de pizza mostra a distribuiÃ§Ã£o de sentimentos por rede social, com percentuais e quantidades de interaÃ§Ãµes para cada sentimento (Positivo, Neutro, Negativo) de todas as redes sociais analisadas.`})()}


REGRAS RIGOROSAS DE FORMATAÃ‡ÃƒO:
- Use emojis nos tÃ­tulos das seÃ§Ãµes (ðŸ”, ðŸ¥§) e nos subtÃ­tulos conforme o exemplo fornecido
- NÃƒO use cÃ³digos de citaÃ§Ã£o como [cite_start], [cite: ], [cite: Dados Coletados] ou qualquer outro formato de citaÃ§Ã£o - escreva o texto diretamente sem cÃ³digos
- Use negrito (**texto**) com MODERAÃ‡ÃƒO - apenas para destacar palavras-chave muito importantes ou valores numÃ©ricos crÃ­ticos
- Evite uso excessivo de asteriscos - prefira texto simples e claro
- Use listas simples com hÃ­fens (-) seguindo padrÃ£o ABNT
- NÃƒO use tabelas Markdown complexas - prefira listas com emojis
- Mantenha formataÃ§Ã£o limpa e profissional
- Mantenha o texto conciso para evitar quebras de pÃ¡gina desnecessÃ¡rias ou blocos de texto que fiquem cortados
- IMPORTANTE: Se os dados contiverem apenas uma rede social, nÃ£o mencione outras redes que nÃ£o estejam presentes nos dados filtrados
- Use os valores calculados fornecidos - nÃ£o recalcule ou deixe placeholders
- NÃƒO inclua seÃ§Ãµes de "AÃ§Ãµes para melhorar", "Action Plan", "Plano de AÃ§Ã£o" ou "ConclusÃ£o" no relatÃ³rio
- NÃƒO inclua seÃ§Ãµes de "ObservaÃ§Ã£o", "ObservaÃ§Ãµes" ou qualquer informaÃ§Ã£o adicional alÃ©m do especificado
- O relatÃ³rio deve conter APENAS as seÃ§Ãµes especificadas acima (VisÃ£o Geral e GrÃ¡ficos de AnÃ¡lise de Sentimento)
- ESTRUTURA CLARA: Mantenha parÃ¡grafos curtos (mÃ¡ximo 3-4 linhas), use quebras de linha adequadas
- HIERARQUIA VISUAL: Use apenas os nÃ­veis de tÃ­tulo especificados (## para seÃ§Ãµes principais)
- LISTAS ORGANIZADAS: Use indentaÃ§Ã£o consistente para listas aninhadas (2 espaÃ§os por nÃ­vel)

IMPORTANTE:
- Seja especÃ­fico e use os dados fornecidos
- Evite "encher linguiÃ§a" - vÃ¡ direto ao ponto
- Mantenha o tom profissional, analÃ­tico e humano
- Use exemplos concretos extraÃ­dos dos dados quando possÃ­vel
- Respeite rigorosamente os filtros aplicados - se os dados contÃªm apenas uma rede, foque exclusivamente nela
- NÃƒO adicione seÃ§Ãµes de recomendaÃ§Ãµes, aÃ§Ãµes, conclusÃµes ou observaÃ§Ãµes - o relatÃ³rio termina apÃ³s a seÃ§Ã£o de GrÃ¡ficos de AnÃ¡lise de Sentimento
- NÃƒO inclua qualquer texto adicional apÃ³s a seÃ§Ã£o de GrÃ¡ficos de AnÃ¡lise de Sentimento`;console.log("ðŸ“‹ [geminiService] Prompt completo (primeiros 2000 caracteres):",W.substring(0,2e3)),console.log("ðŸ“‹ [geminiService] Resumo do prompt:",{totalCaracteres:W.length,redesMencionadas:U,temFiltro:D,redeFiltrada:T,totalInteracoes:h.total}),console.log("ðŸ”„ Gerando relatÃ³rio com Gemini AI...");const q=async()=>{const S=["gemini-1.5-flash-001","gemini-1.5-flash","gemini-1.5-pro-001","gemini-1.5-pro","gemini-pro"];let v=null;for(const $ of S)try{console.log(`ðŸ”„ Tentando modelo Gemini: ${$}`);const V=await l.getGenerativeModel({model:$}).generateContent(W);return console.log(`âœ… Sucesso com modelo: ${$}`),V.response.text()}catch(B){console.warn(`âš ï¸ Modelo ${$} falhou:`,B.message),v=B;const V=B.message||String(B);if(!V.includes("404")&&!V.includes("not found")&&!V.includes("is not found")&&!V.includes("not supported"))throw B;continue}const P=new Error(`Todos os modelos Gemini falharam. Ãšltimo erro: ${v==null?void 0:v.message}`);throw P.originalError=v,P.modelsTried=S,P};let O,L=!1;try{O=await Ks(q),console.log("âœ… RelatÃ³rio gerado com sucesso usando Gemini AI")}catch(S){const v=S.message||String(S),P=S.status||S.statusCode||S.response&&S.response.status,$=P===429||v&&(v.includes("429")||v.includes("quota")||v.includes("Quota exceeded")||v.includes("rate limit")||v.includes("Rate limit")),B=P===404||v&&(v.includes("404")||v.includes("not found")||v.includes("is not found")||v.includes("not supported")||v.includes("models/")&&v.includes("is not found"));if(console.log("ðŸ” [geminiService] AnÃ¡lise de erro Gemini:",{errorMessage:v,errorStatus:P,isQuotaError:$,isModelNotFoundError:B,originalError:S,modelsTried:S.modelsTried||"N/A"}),$||B){if(console.warn(`âš ï¸ Gemini ${B?"modelo nÃ£o encontrado":"quota excedida"} (${P||"erro"}). Tentando usar Groq como fallback...`),console.log("ðŸ” Verificando configuraÃ§Ã£o do Groq...",{groqSDKAvailable:!!M,groqAPIKeyAvailable:!!Ee,groqAPIKeyLength:(Ee==null?void 0:Ee.length)||0}),!(!!Ee||!!M))throw console.warn("âš ï¸ Groq nÃ£o configurado. Retornando erro do Gemini apenas."),S;try{try{O=await zs(W),L=!0,console.log("âœ… RelatÃ³rio gerado com sucesso usando Groq AI via backend (fallback)")}catch{console.warn("âš ï¸ Backend Groq nÃ£o disponÃ­vel. Tentando usar Groq diretamente no frontend...");const yt=Vs();if(!yt)throw console.warn("âš ï¸ Groq nÃ£o configurado no frontend. Retornando erro do Gemini."),S;console.log("ðŸ”„ Gerando relatÃ³rio com Groq AI (fallback direto no frontend)..."),O=((c=(d=(await yt.chat.completions.create({messages:[{role:"system",content:"VocÃª Ã© um consultor sÃªnior de CX (Customer Experience). Escreva relatÃ³rios executivos narrativos, profissionais e humanos em formato Markdown."},{role:"user",content:W}],model:"llama-3.1-8b-instant",temperature:.7,max_tokens:4e3})).choices[0])==null?void 0:d.message)==null?void 0:c.content)||"",L=!0,console.log("âœ… RelatÃ³rio gerado com sucesso usando Groq AI diretamente no frontend (fallback)")}}catch(we){throw console.error("âŒ Erro ao gerar relatÃ³rio com Groq:",we),S}}else throw S}return{success:!0,data:O,provider:L?"groq":"gemini",fallbackUsed:L}}catch(l){console.error("âŒ Erro ao gerar relatÃ³rio executivo:",l);const f=l.message||String(l);if((l.status||l.statusCode||l.response&&l.response.status)===429||f&&(f.includes("429")||f.includes("quota")||f.includes("Quota exceeded")||f.includes("rate limit")||f.includes("Rate limit"))){let m="";try{const b=JSON.stringify(l),x=b.match(/retry.*?(\d+)\s*(?:s|sec|second)/i)||b.match(/wait.*?(\d+)\s*(?:s|sec|second)/i)||b.match(/(\d+)\s*(?:s|sec|second).*?retry/i);if(x){const A=parseInt(x[1]);m=` Aguarde aproximadamente ${Math.ceil(A/60)} minuto(s) antes de tentar novamente.`}}catch{}return{success:!1,error:`Quota da API do Gemini excedida e fallback (Groq) tambÃ©m falhou.${m} Por favor, aguarde alguns minutos e tente novamente. Verifique seu plano e billing no Google Cloud Console: https://console.cloud.google.com/`}}return{success:!1,error:l.message||"Erro ao gerar relatÃ³rio executivo"}}};let se=null,_e=null;const Js=async()=>{try{if(!se){const e=await tt(()=>import("./utils-vendor-CBIR_x-l.js").then(t=>t.j),[]);se=e.default||e.jsPDF||e,typeof se=="object"&&se.jsPDF&&(se=se.jsPDF)}if(!_e){const e=await tt(()=>import("./html2canvas.esm-DadlvMMh.js"),[]);_e=e.default||e}if(!se||!_e)throw new Error("NÃ£o foi possÃ­vel carregar as bibliotecas PDF");return{jsPDF:se,html2canvas:_e}}catch(e){throw console.error("Erro ao carregar bibliotecas PDF:",e),e}},cr=e=>e?(e=e.replace(/\[cite_start\][\s\S]*?\[cite:\s*\]/g,""),e=e.replace(/\[cite_start\]/g,""),e=e.replace(/\[cite:\s*\]/g,""),e=e.replace(/\[cite:\s*[^\]]+\]/g,""),e):"",Re=e=>e?(e=e.replace(/\*\*([^*]+?)\*\*/g,"<strong>$1</strong>"),e=e.replace(/\*\*/g,""),e=e.replace(/\*/g,""),e):"",Ys=e=>{if(!e)return"";const t=e.split(`
`),o=[];let r=!1,n=[];for(let s=0;s<t.length;s++){const a=t[s],i=cr(a);if(i.includes("[QUEBRA DE PÃGINA")||i.includes("[QUEBRA DE PAGINA")){r&&(o.push(`<ul style="margin: 10px 0; padding-left: 20px; list-style-type: disc;">${n.join("")}</ul>`),n=[],r=!1);continue}if(i.startsWith("# ")){r&&(o.push(`<ul style="margin: 10px 0; padding-left: 20px; list-style-type: disc;">${n.join("")}</ul>`),n=[],r=!1);const d=Re(i.substring(2));o.push(`<h1 style="color: #1634FF; font-size: 24px; margin-top: 20px; margin-bottom: 10px; font-weight: bold; font-family: 'Poppins', sans-serif;">${d}</h1>`)}else if(i.startsWith("## ")){r&&(o.push(`<ul style="margin: 10px 0; padding-left: 20px; list-style-type: disc;">${n.join("")}</ul>`),n=[],r=!1);const d=Re(i.substring(3));o.push(`<h2 style="color: #1634FF; font-size: 20px; margin-top: 18px; margin-bottom: 8px; font-weight: bold; font-family: 'Poppins', sans-serif;">${d}</h2>`)}else if(i.startsWith("### ")){r&&(o.push(`<ul style="margin: 10px 0; padding-left: 20px; list-style-type: disc;">${n.join("")}</ul>`),n=[],r=!1);const d=Re(i.substring(4));o.push(`<h3 style="color: #1634FF; font-size: 18px; margin-top: 16px; margin-bottom: 6px; font-weight: bold; font-family: 'Poppins', sans-serif;">${d}</h3>`)}else if(i.match(/^\s*[-*]\s/)){r||(r=!0);const d=Re(i.replace(/^\s*[-*]\s+/,"")),c=i.match(/^(\s*)([-*])/),f=(c?Math.floor(c[1].length/2):0)*20;n.push(`<li style="margin-bottom: 6px; line-height: 1.6; color: #272A30; padding-left: ${f}px;">${d}</li>`)}else if(i.trim()==="")r&&(o.push(`<ul style="margin: 10px 0; padding-left: 20px; list-style-type: disc;">${n.join("")}</ul>`),n=[],r=!1),o.push("<br/>");else{r&&(o.push(`<ul style="margin: 10px 0; padding-left: 20px; list-style-type: disc;">${n.join("")}</ul>`),n=[],r=!1);const d=Re(i);o.push(`<p style="margin-bottom: 10px; line-height: 1.6; color: #272A30;">${d}</p>`)}}return r&&o.push(`<ul style="margin: 10px 0; padding-left: 20px; list-style-type: disc;">${n.join("")}</ul>`),o.filter(s=>s!=="").join("")},Qs=async(e,t=null,o=null)=>new Promise(async(r,n)=>{try{const{jsPDF:s,html2canvas:a}=await Js(),i=new s({orientation:"portrait",unit:"mm",format:"a4"}),d=i.internal.pageSize.getWidth(),c=i.internal.pageSize.getHeight(),l=20,f=d-l*2;let p=l;const h=y=>p+y>c-l?(i.addPage(),p=l,!0):!1;i.setFontSize(22),i.setTextColor(22,52,255),i.setFont("helvetica","bold"),i.text("RelatÃ³rio Executivo de CX",l,p),p+=10,i.setFontSize(10),i.setTextColor(100,100,100),i.setFont("helvetica","normal");const m=new Date().toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric"});i.text(`Data: ${m}`,l,p),p+=6,i.setDrawColor(22,52,255),i.setLineWidth(.5),i.line(l,p,d-l,p),p+=8;const b=e.split(`
`),x=[];let A=[],R=!1;for(let y=0;y<b.length;y++){const w=b[y];w.includes("[QUEBRA DE PÃGINA")||w.includes("[QUEBRA DE PAGINA")?(A.length>0&&(x.push({content:A.join(`
`),pageBreak:!1}),A=[]),R=!0):(R&&A.length===0&&w.trim()!==""&&(x.push({content:"",pageBreak:!0}),R=!1),A.push(w))}A.length>0&&x.push({content:A.join(`
`),pageBreak:!1});for(let y=0;y<x.length;y++){const w=x[y];if(w.pageBreak&&y>0){i.addPage(),p=l;continue}if(w.pageBreak&&y===0||!w.content.trim())continue;const N=Ys(w.content),_=w.content.includes("## 2. ðŸ¥§ GrÃ¡ficos de AnÃ¡lise de Sentimento")||w.content.includes("## 2. ðŸ¥§ GrÃ¡ficos de Analise de Sentimento"),j=document.createElement("div");j.style.width=`${f}mm`,j.style.padding=y===0?"10px":"20px",j.style.position="absolute",j.style.left="-9999px",j.style.backgroundColor="#ffffff",j.style.fontFamily="Poppins, Arial, sans-serif",j.style.fontSize="12px",j.style.color="#272A30",j.style.fontWeight="400",j.style.lineHeight="1.6",j.innerHTML=`<div style="max-width: 100%;">${N}</div>`,document.body.appendChild(j);try{const C=await a(j,{scale:2,useCORS:!0,backgroundColor:"#ffffff",width:j.offsetWidth,height:j.scrollHeight,logging:!1}),D=C.toDataURL("image/png"),T=f,k=C.height*T/C.width;y>0&&h(k);let U=k,z=p,W=0;const q=c-p-l,O=Math.min(k,q);for(i.addImage(D,"PNG",l,p,T,k),U-=q;U>0;)i.addPage(),W++,U-=c-l*2;if(W>0){const L=k-(O+W*(c-l*2));p=l+Math.max(0,L)}else p+=O;p+=10,document.body.removeChild(j)}catch(C){document.body.contains(j)&&document.body.removeChild(j),console.error("Erro ao converter HTML para imagem:",C),i.setFontSize(12),i.setTextColor(39,42,48);const D=cr(w.content);i.splitTextToSize(D,f).forEach(k=>{h(7),i.text(k,l,p),p+=7})}}if(o&&o.dataUrl){console.log("ðŸ“Š [PDF] Adicionando grÃ¡fico de sentimento na Ãºltima pÃ¡gina...");const y=80;h(y+20),p+=10;try{const w=f;o.dataUrl.startsWith("data:image")?(i.addImage(o.dataUrl,"PNG",l,p,w,y),p+=y+10,console.log("âœ… [PDF] GrÃ¡fico de sentimento adicionado na Ãºltima pÃ¡gina com sucesso")):console.warn("âš ï¸ [PDF] dataUrl do grÃ¡fico de sentimento invÃ¡lido")}catch(w){console.error("âŒ [PDF] Erro ao adicionar grÃ¡fico de sentimento:",w)}}const E=i.internal.pages.length-1;for(let y=1;y<=E;y++)i.setPage(y),i.setFontSize(8),i.setTextColor(150,150,150),i.text(`PÃ¡gina ${y} de ${E}`,d-l-20,c-10);r(i)}catch(s){n(s)}}),Zs=async(e,t=null,o=null,r=null)=>{try{const n=await Qs(e,t,r),s=o||`relatorio_cx_${new Date().toISOString().split("T")[0]}.pdf`;return n.save(s),{success:!0}}catch(n){return console.error("Erro ao gerar PDF:",n),{success:!1,error:n.message}}};var lr={exports:{}};(function(e,t){(function(o,r){r()})(fr,function(){function o(c,l){return typeof l>"u"?l={autoBom:!1}:typeof l!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),l={autoBom:!l}),l.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(c.type)?new Blob(["\uFEFF",c],{type:c.type}):c}function r(c,l,f){var p=new XMLHttpRequest;p.open("GET",c),p.responseType="blob",p.onload=function(){d(p.response,l,f)},p.onerror=function(){console.error("could not download file")},p.send()}function n(c){var l=new XMLHttpRequest;l.open("HEAD",c,!1);try{l.send()}catch{}return 200<=l.status&&299>=l.status}function s(c){try{c.dispatchEvent(new MouseEvent("click"))}catch{var l=document.createEvent("MouseEvents");l.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),c.dispatchEvent(l)}}var a=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof globalThis=="object"&&globalThis.global===globalThis?globalThis:void 0,i=a.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),d=a.saveAs||(typeof window!="object"||window!==a?function(){}:"download"in HTMLAnchorElement.prototype&&!i?function(c,l,f){var p=a.URL||a.webkitURL,h=document.createElement("a");l=l||c.name||"download",h.download=l,h.rel="noopener",typeof c=="string"?(h.href=c,h.origin===location.origin?s(h):n(h.href)?r(c,l,f):s(h,h.target="_blank")):(h.href=p.createObjectURL(c),setTimeout(function(){p.revokeObjectURL(h.href)},4e4),setTimeout(function(){s(h)},0))}:"msSaveOrOpenBlob"in navigator?function(c,l,f){if(l=l||c.name||"download",typeof c!="string")navigator.msSaveOrOpenBlob(o(c,f),l);else if(n(c))r(c,l,f);else{var p=document.createElement("a");p.href=c,p.target="_blank",setTimeout(function(){s(p)})}}:function(c,l,f,p){if(p=p||open("","_blank"),p&&(p.document.title=p.document.body.innerText="downloading..."),typeof c=="string")return r(c,l,f);var h=c.type==="application/octet-stream",m=/constructor/i.test(a.HTMLElement)||a.safari,b=/CriOS\/[\d]+/.test(navigator.userAgent);if((b||h&&m||i)&&typeof FileReader<"u"){var x=new FileReader;x.onloadend=function(){var E=x.result;E=b?E:E.replace(/^data:[^;]*;/,"data:attachment/file;"),p?p.location.href=E:location=E,p=null},x.readAsDataURL(c)}else{var A=a.URL||a.webkitURL,R=A.createObjectURL(c);p?p.location=R:location.href=R,p=null,setTimeout(function(){A.revokeObjectURL(R)},4e4)}});a.saveAs=d.saveAs=d,e.exports=d})})(lr);var ea=lr.exports;const ta=e=>e?(e=e.replace(/\[cite_start\][\s\S]*?\[cite:\s*\]/g,""),e=e.replace(/\[cite_start\]/g,""),e=e.replace(/\[cite:\s*\]/g,""),e=e.replace(/\[cite:\s*[^\]]+\]/g,""),e):"",Ae=e=>e?(e=e.replace(/\*\*([^*]+?)\*\*/g,"<strong>$1</strong>"),e=e.replace(/\*\*/g,""),e=e.replace(/\*/g,""),e):"",oa=e=>{var n,s;if(!e)return[];const t=[],o=e.split(`
`);let r=[];for(let a=0;a<o.length;a++){const i=o[a],d=ta(i);if(d.includes("[QUEBRA DE PÃGINA")||d.includes("[QUEBRA DE PAGINA")){r.length>0&&(t.push(...r),r=[]),t.push(new Z({children:[new H({text:""})],pageBreakBefore:!0}));continue}if(d.startsWith("# ")){r.length>0&&(t.push(...r),r=[]);const c=Ae(d.substring(2)),l=[];c.split(/(<strong>.*?<\/strong>)/g).forEach(p=>{if(p.startsWith("<strong>")&&p.endsWith("</strong>")){const h=p.replace(/<\/?strong>/g,"");l.push(new H({text:h,bold:!0}))}else p.trim()&&l.push(new H({text:p}))}),t.push(new Z({children:l.length>0?l:[new H({text:c})],heading:De.HEADING_1,spacing:{before:400,after:200}}))}else if(d.startsWith("## ")){r.length>0&&(t.push(...r),r=[]);const c=Ae(d.substring(3)),l=[];c.split(/(<strong>.*?<\/strong>)/g).forEach(p=>{if(p.startsWith("<strong>")&&p.endsWith("</strong>")){const h=p.replace(/<\/?strong>/g,"");l.push(new H({text:h,bold:!0}))}else p.trim()&&l.push(new H({text:p}))}),t.push(new Z({children:l.length>0?l:[new H({text:c})],heading:De.HEADING_2,spacing:{before:300,after:150}}))}else if(d.startsWith("### ")){r.length>0&&(t.push(...r),r=[]);const c=Ae(d.substring(4)),l=[];c.split(/(<strong>.*?<\/strong>)/g).forEach(p=>{if(p.startsWith("<strong>")&&p.endsWith("</strong>")){const h=p.replace(/<\/?strong>/g,"");l.push(new H({text:h,bold:!0}))}else p.trim()&&l.push(new H({text:p}))}),t.push(new Z({children:l.length>0?l:[new H({text:c})],heading:De.HEADING_3,spacing:{before:200,after:100}}))}else if(d.match(/^\s*[-*]\s/)){const c=Ae(d.replace(/^\s*[-*]\s+/,"")),l=((s=(n=d.match(/^(\s*)/))==null?void 0:n[1])==null?void 0:s.length)||0,f=[];c.split(/(<strong>.*?<\/strong>)/g).forEach(h=>{if(h.startsWith("<strong>")&&h.endsWith("</strong>")){const m=h.replace(/<\/?strong>/g,"");f.push(new H({text:m,bold:!0}))}else h.trim()&&f.push(new H({text:h}))}),r.push(new Z({children:f.length>0?f:[new H({text:c})],bullet:{level:Math.floor(l/2)},spacing:{after:100}}))}else if(d.trim()==="")r.length>0&&(t.push(...r),r=[]),t.push(new Z({children:[new H({text:""})]}));else{r.length>0&&(t.push(...r),r=[]);const c=Ae(d),l=[];c.split(/(<strong>.*?<\/strong>)/g).forEach(p=>{if(p.startsWith("<strong>")&&p.endsWith("</strong>")){const h=p.replace(/<\/?strong>/g,"");l.push(new H({text:h,bold:!0}))}else p.trim()&&l.push(new H({text:p}))}),t.push(new Z({children:l.length>0?l:[new H({text:c})],spacing:{after:150}}))}}return r.length>0&&t.push(...r),t},ra=async(e,t=null)=>{try{const o=[];o.push(new Z({children:[new H({text:"RelatÃ³rio Executivo de CX",bold:!0})],heading:De.HEADING_1,alignment:Er.LEFT,spacing:{after:200}}));const r=new Date().toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric"});o.push(new Z({children:[new H({text:`Data: ${r}`})],spacing:{after:300}})),o.push(new Z({text:""}));const n=oa(e);if(o.push(...n),t&&t.dataUrl)try{const a=t.dataUrl.split(",")[1],i=atob(a),d=new Array(i.length);for(let f=0;f<i.length;f++)d[f]=i.charCodeAt(f);const c=new Uint8Array(d),l=new Blob([c],{type:"image/png"});o.push(new Z({children:[new H({text:"[GrÃ¡fico de AnÃ¡lise de Sentimento incluÃ­do]"})],spacing:{before:200,after:200}}))}catch(a){console.error("Erro ao processar imagem do grÃ¡fico:",a)}return new Rr({sections:[{properties:{},children:o}],styles:{default:{document:{run:{font:"Poppins",size:22,color:"272A30"},paragraph:{spacing:{line:276,lineRule:"auto"}}},heading1:{run:{font:"Poppins",size:48,color:"1634FF",bold:!0}},heading2:{run:{font:"Poppins",size:40,color:"1634FF",bold:!0}},heading3:{run:{font:"Poppins",size:36,color:"1634FF",bold:!0}}}}})}catch(o){throw console.error("Erro ao gerar documento Word:",o),o}},na=async(e,t=null,o=null)=>{try{const r=await ra(e,o),n=await xr.toBlob(r),s=t||`relatorio_cx_${new Date().toISOString().split("T")[0]}.docx`;return ea.saveAs(n,s),{success:!0}}catch(r){return console.error("Erro ao gerar Word:",r),{success:!1,error:r.message}}},dr=async()=>{if(typeof window<"u"&&window.Plotly)return console.log("âœ… [ChartExporter] Usando window.Plotly"),window.Plotly;try{console.log("ðŸ”„ [ChartExporter] Tentando importar plotly.js-dist-min...");const e=await tt(()=>import("./plotly-vendor-3GFWULd-.js").then(t=>t.p),__vite__mapDeps([0,1,2]));return e.default&&e.default.newPlot?e.default:(e.newPlot&&e.toImage,e)}catch(e){throw console.error("âŒ [ChartExporter] Erro ao importar Plotly:",e),new Error("Plotly nÃ£o estÃ¡ disponÃ­vel. Certifique-se de que react-plotly.js estÃ¡ instalado e os grÃ¡ficos estÃ£o sendo renderizados no Dashboard.")}},to=async(e,t="bar")=>new Promise(async(o,r)=>{try{const n=await dr();let s,a,i;t==="bar"?(s=[{x:e.networkVolume.map(c=>c.socialNetwork),y:e.networkVolume.map(c=>c.count),type:"bar",marker:{color:"#1634FF",line:{color:"#0d28a3",width:1}}}],a={title:{text:"Volume por Rede Social",font:{size:18,color:"#ffffff"}},xaxis:{title:{text:"Rede Social",font:{color:"#ffffff"}},tickfont:{color:"#ffffff"}},yaxis:{title:{text:"Quantidade",font:{color:"#ffffff"}},tickfont:{color:"#ffffff"}},paper_bgcolor:"#1e2130",plot_bgcolor:"#1e2130",font:{color:"#ffffff"},margin:{l:60,r:20,t:60,b:60}}):t==="pie"&&(s=[{values:e.reasonFrequency.map(c=>c.count),labels:e.reasonFrequency.map(c=>c.reason),type:"pie",hole:.4,marker:{colors:["#1634FF","#00d1b2","#ff6b6b","#ffd93d","#6bcf7f","#a29bfe"],line:{color:"#1e2130",width:2}},textfont:{color:"#ffffff",size:14}}],a={title:{text:"Motivos Frequentes",font:{size:18,color:"#ffffff"}},paper_bgcolor:"#1e2130",plot_bgcolor:"#1e2130",font:{color:"#ffffff"},margin:{l:20,r:20,t:60,b:20},showlegend:!0,legend:{font:{color:"#ffffff"},x:1.1,y:.5}}),i={displayModeBar:!1,responsive:!0};const d=document.createElement("div");d.style.width="800px",d.style.height="500px",d.style.position="absolute",d.style.left="-9999px",document.body.appendChild(d),console.log(`ðŸ”„ [ChartExporter] Renderizando grÃ¡fico tipo: ${t}`),n.newPlot(d,s,a,i).then(()=>(console.log("âœ… [ChartExporter] GrÃ¡fico renderizado, exportando como imagem..."),n.toImage(d,{format:"png",width:800,height:500,scale:2}))).then(c=>{if(console.log("âœ… [ChartExporter] Imagem exportada:",{hasDataUrl:!!c,dataUrlLength:c==null?void 0:c.length,dataUrlStart:c==null?void 0:c.substring(0,50),isValidFormat:c==null?void 0:c.startsWith("data:image/png")}),document.body.contains(d)&&document.body.removeChild(d),!c||!c.startsWith("data:image"))throw new Error(`Formato de imagem invÃ¡lido: ${c==null?void 0:c.substring(0,50)}`);const l=c.split(",")[1];o({base64:l,dataUrl:c,width:800,height:500})}).catch(c=>{console.error(`âŒ [ChartExporter] Erro ao exportar grÃ¡fico tipo ${t}:`,c),document.body.contains(d)&&document.body.removeChild(d),r(c)})}catch(n){r(n)}}),oo=async e=>{var t,o,r,n,s,a;try{if(console.log("ðŸ”„ [ChartExporter] Iniciando geraÃ§Ã£o de imagens dos grÃ¡ficos..."),console.log("ðŸ“Š [ChartExporter] Dados recebidos:",{hasChartData:!!e,hasNetworkVolume:!!(e!=null&&e.networkVolume),hasReasonFrequency:!!(e!=null&&e.reasonFrequency),networkVolumeLength:(t=e==null?void 0:e.networkVolume)==null?void 0:t.length,reasonFrequencyLength:(o=e==null?void 0:e.reasonFrequency)==null?void 0:o.length}),!e||!e.networkVolume||!e.reasonFrequency)return console.error("âŒ [ChartExporter] Dados de grÃ¡ficos invÃ¡lidos:",e),{success:!1,error:"Dados de grÃ¡ficos invÃ¡lidos"};console.log("ðŸ”„ [ChartExporter] Gerando grÃ¡fico de barras...");const i=await to(e,"bar");console.log("âœ… [ChartExporter] GrÃ¡fico de barras gerado:",{hasDataUrl:!!(i!=null&&i.dataUrl),dataUrlLength:(r=i==null?void 0:i.dataUrl)==null?void 0:r.length,dataUrlStart:(n=i==null?void 0:i.dataUrl)==null?void 0:n.substring(0,50)}),console.log("ðŸ”„ [ChartExporter] Gerando grÃ¡fico de pizza...");const d=await to(e,"pie");console.log("âœ… [ChartExporter] GrÃ¡fico de pizza gerado:",{hasDataUrl:!!(d!=null&&d.dataUrl),dataUrlLength:(s=d==null?void 0:d.dataUrl)==null?void 0:s.length,dataUrlStart:(a=d==null?void 0:d.dataUrl)==null?void 0:a.substring(0,50)});const c={success:!0,charts:{networkVolume:i,reasonFrequency:d}};return console.log("âœ… [ChartExporter] Todas as imagens geradas com sucesso:",{hasNetworkVolume:!!c.charts.networkVolume,hasReasonFrequency:!!c.charts.reasonFrequency}),c}catch(i){return console.error("âŒ [ChartExporter] Erro ao gerar imagens dos grÃ¡ficos:",i),console.error("âŒ [ChartExporter] Stack:",i.stack),{success:!1,error:i.message}}},sa=async e=>new Promise(async(t,o)=>{try{if(!Array.isArray(e)||e.length===0){o(new Error("Dados de sentimento invÃ¡lidos ou vazios"));return}const r=await dr(),n={Positivo:"#15A237",Neutro:"#FCC200",Negativo:"#006AB9"},s=e.map(m=>`${m.network} - ${m.sentiment}`),a=e.map(m=>m.percentage),i=e.map(m=>n[m.sentiment]||"#272A30"),d=[{type:"pie",labels:s,values:a,hole:.4,marker:{colors:i,line:{color:"#F3F7FC",width:2}},textinfo:"percent+label",textposition:"outside",textfont:{family:"Poppins, sans-serif",size:11,color:"#272A30"},hovertemplate:"<b>%{label}</b><br>Percentual: %{percent}<br>Valor: %{value:.2f}%<extra></extra>"}],c={title:{text:"GrÃ¡fico: AnÃ¡lise de Sentimento por Rede Social",font:{family:"Poppins, sans-serif",size:18,color:"#1634FF",weight:"bold"},x:.5,xanchor:"center"},paper_bgcolor:"#F3F7FC",plot_bgcolor:"#F3F7FC",font:{family:"Poppins, sans-serif",size:12,color:"#272A30"},legend:{orientation:"v",x:1.05,y:.5,font:{family:"Poppins, sans-serif",size:11},bgcolor:"rgba(255, 255, 255, 0.8)",bordercolor:"#272A30",borderwidth:1},margin:{l:50,r:150,t:80,b:50},showlegend:!0,autosize:!0},l={displayModeBar:!1,responsive:!0},f=document.createElement("div");f.style.width="800px",f.style.height="500px",f.style.position="absolute",f.style.left="-9999px",document.body.appendChild(f),console.log("ðŸ”„ [ChartExporter] Renderizando grÃ¡fico de sentimento..."),await r.newPlot(f,d,c,l),await new Promise(m=>setTimeout(m,500)),console.log("âœ… [ChartExporter] GrÃ¡fico renderizado, exportando como imagem...");const p=await r.toImage(f,{format:"png",width:800,height:500,scale:2});document.body.removeChild(f);const h={dataUrl:p,width:800,height:500};console.log("âœ… [ChartExporter] GrÃ¡fico de sentimento exportado com sucesso"),t(h)}catch(r){console.error("âŒ [ChartExporter] Erro ao gerar grÃ¡fico de sentimento:",r),console.error("âŒ [ChartExporter] Stack:",r.stack),o(r)}}),aa=()=>{const[e,t]=I.useState(""),[o,r]=I.useState(!1),[n,s]=I.useState(!1),[a,i]=I.useState(!1),[d,c]=I.useState(null),[l,f]=I.useState(null),p=w=>{if(!Array.isArray(w)||w.length===0)return[];const N={};w.forEach(j=>{const C=j.socialNetwork||"Desconhecido",D=j.sentiment||"Neutro";N[C]||(N[C]={Positivo:0,Neutro:0,Negativo:0,total:0}),N[C][D]!==void 0&&N[C][D]++,N[C].total++});const _=[];return Object.keys(N).forEach(j=>{const C=N[j];["Positivo","Neutro","Negativo"].forEach(T=>{const k=C[T]||0,U=C.total>0?k/C.total*100:0;k>0&&_.push({network:j,sentiment:T,count:k,percentage:U})})}),_},[h,m]=I.useState({socialNetwork:"",contactReason:"",dateFrom:"",dateTo:""}),b=["Instagram","Facebook","TikTok","Messenger","YouTube","PlayStore"],x=["Produto","Suporte","Bug","Elogio","ReclamaÃ§Ã£o","Oculto","Outro"],A=(w,N)=>{m(_=>({..._,[w]:N}))},R=async()=>{var w,N,_,j,C;r(!0),t(""),c(null);try{console.log("ðŸ” [Reports] Filtros aplicados:",h),console.log("ðŸ” [Reports] URL da API:","/api/sociais");const D=await ko(h);if(console.log("ðŸ“Š [Reports] Resultado da busca:",{success:D.success,count:D.count,hasData:!!D.data,dataLength:(w=D.data)==null?void 0:w.length,error:D.error,fullResponse:D}),!D.success){const O=D.error||"Erro desconhecido ao buscar dados";t(`Erro ao buscar dados: ${O}`),r(!1);return}if(D.count===0){t("Nenhum dado encontrado para os filtros selecionados. Tente remover os filtros ou ajustar as datas."),r(!1);return}let T=null;try{T=await at(h),console.log("ðŸ“Š [Reports] Dados dos grÃ¡ficos:",T)}catch(O){console.warn("âš ï¸ [Reports] Erro ao buscar dados dos grÃ¡ficos:",O)}if(T!=null&&T.data)try{console.log("ðŸ”„ [Reports] Gerando imagens dos grÃ¡ficos...",T.data);const O=await oo(T.data);console.log("ðŸ“Š [Reports] Resultado da geraÃ§Ã£o de imagens:",O),O.success?(c(O.charts),console.log("âœ… [Reports] Imagens dos grÃ¡ficos geradas com sucesso"),console.log("ðŸ“¸ [Reports] Chart Images:",{hasNetworkVolume:!!O.charts.networkVolume,hasReasonFrequency:!!O.charts.reasonFrequency,networkVolumeDataUrl:((_=(N=O.charts.networkVolume)==null?void 0:N.dataUrl)==null?void 0:_.substring(0,50))+"...",reasonFrequencyDataUrl:((C=(j=O.charts.reasonFrequency)==null?void 0:j.dataUrl)==null?void 0:C.substring(0,50))+"..."})):console.warn("âš ï¸ [Reports] Erro ao gerar imagens dos grÃ¡ficos:",O.error)}catch(O){console.error("âŒ [Reports] Erro ao gerar imagens dos grÃ¡ficos:",O),console.error("âŒ [Reports] Stack:",O.stack)}else console.warn("âš ï¸ [Reports] Dados dos grÃ¡ficos nÃ£o disponÃ­veis:",T);const k=D.data.map(O=>({socialNetwork:O.socialNetwork,contactReason:O.contactReason,sentiment:O.sentiment,messageText:O.messageText,rating:O.rating||null})),U=[...new Set(k.map(O=>O.socialNetwork).filter(Boolean))],z=k.reduce((O,L)=>{const S=L.socialNetwork||"N/A";return O[S]=(O[S]||0)+1,O},{});console.log("ðŸ” [Reports] AnÃ¡lise de redes sociais nos dados:",{totalItens:k.length,redesPresentes:U,distribuicaoPorRede:z,filtrosAplicados:h,temFiltroRede:!!h.socialNetwork&&h.socialNetwork!==""});const W=p(k);if(console.log("ðŸ“Š [Reports] Dados de sentimento calculados:",W),W.length>0)try{console.log("ðŸ”„ [Reports] Gerando grÃ¡fico de sentimento...");const O=await sa(W);f(O),console.log("âœ… [Reports] GrÃ¡fico de sentimento gerado com sucesso")}catch(O){console.error("âŒ [Reports] Erro ao gerar grÃ¡fico de sentimento:",O),f(null)}else f(null);console.log("DADOS ENVIADOS:",k),console.log("Quantidade de itens:",k.length),console.log("Primeiro item:",k[0]||"Nenhum item");const q=await Xs(k,h);q.success?t(q.data):t(`Erro ao gerar relatÃ³rio: ${q.error}`)}catch(D){console.error("Erro ao gerar relatÃ³rio:",D),t(`Erro ao gerar relatÃ³rio: ${D.message}`)}finally{r(!1)}},E=async()=>{var w,N,_,j;if(e){s(!0);try{console.log("ðŸ“„ [Reports] Iniciando geraÃ§Ã£o de PDF..."),console.log("ðŸ“Š [Reports] Chart Images disponÃ­veis:",{hasChartImages:!!d,hasNetworkVolume:!!(d!=null&&d.networkVolume),hasReasonFrequency:!!(d!=null&&d.reasonFrequency),networkVolumeDataUrl:((N=(w=d==null?void 0:d.networkVolume)==null?void 0:w.dataUrl)==null?void 0:N.substring(0,50))+"...",reasonFrequencyDataUrl:((j=(_=d==null?void 0:d.reasonFrequency)==null?void 0:_.dataUrl)==null?void 0:j.substring(0,50))+"..."});let C=d;if(!d||!d.networkVolume||!d.reasonFrequency){console.log("âš ï¸ [Reports] Imagens nÃ£o disponÃ­veis, tentando gerar novamente...");try{const T=await at(h);if(T!=null&&T.data){const k=await oo(T.data);k.success?(C=k.charts,c(k.charts),console.log("âœ… [Reports] Imagens geradas novamente com sucesso")):console.warn("âš ï¸ [Reports] NÃ£o foi possÃ­vel gerar imagens:",k.error)}}catch(T){console.warn("âš ï¸ [Reports] Erro ao tentar gerar imagens novamente:",T)}}console.log("ðŸ“Š [Reports] Usando imagens para PDF:",{hasImages:!!C,hasNetworkVolume:!!(C!=null&&C.networkVolume),hasReasonFrequency:!!(C!=null&&C.reasonFrequency)});const D=await Zs(e,C,null,l);D.success?console.log("âœ… [Reports] PDF gerado com sucesso"):(console.error("âŒ [Reports] Erro ao gerar PDF:",D.error),alert(`Erro ao gerar PDF: ${D.error||"Erro desconhecido"}`))}catch(C){console.error("âŒ [Reports] Erro ao baixar PDF:",C),console.error("âŒ [Reports] Stack:",C.stack),alert("Erro ao gerar PDF. Tente novamente.")}finally{s(!1)}}},y=async()=>{if(e){i(!0);try{console.log("ðŸ“„ [Reports] Iniciando geraÃ§Ã£o de Word...");const w=await na(e,null,l);w.success?console.log("âœ… [Reports] Word gerado com sucesso"):(console.error("âŒ [Reports] Erro ao gerar Word:",w.error),alert(`Erro ao gerar Word: ${w.error||"Erro desconhecido"}`))}catch(w){console.error("âŒ [Reports] Erro ao baixar Word:",w),console.error("âŒ [Reports] Stack:",w.stack),alert("Erro ao gerar Word. Tente novamente.")}finally{i(!1)}}};return u.jsxs("div",{className:"velohub-container",children:[u.jsxs("h2",{className:"section-title",children:[u.jsx(gr,{className:"section-icon"}),"RelatÃ³rio Executivo de CX"]}),u.jsxs("div",{className:"filters-section",children:[u.jsxs("div",{className:"filter-group",children:[u.jsx("label",{children:"Rede Social"}),u.jsxs("select",{value:h.socialNetwork,onChange:w=>A("socialNetwork",w.target.value),className:"velohub-input",children:[u.jsx("option",{value:"",children:"Todas"}),b.map(w=>u.jsx("option",{value:w,children:w},w))]})]}),u.jsxs("div",{className:"filter-group",children:[u.jsx("label",{children:"Motivo"}),u.jsxs("select",{value:h.contactReason,onChange:w=>A("contactReason",w.target.value),className:"velohub-input",children:[u.jsx("option",{value:"",children:"Todos"}),x.map(w=>u.jsx("option",{value:w,children:w},w))]})]}),u.jsxs("div",{className:"filter-group",children:[u.jsx("label",{children:"Data Inicial"}),u.jsx("input",{type:"date",value:h.dateFrom,onChange:w=>A("dateFrom",w.target.value),className:"velohub-input"})]}),u.jsxs("div",{className:"filter-group",children:[u.jsx("label",{children:"Data Final"}),u.jsx("input",{type:"date",value:h.dateTo,onChange:w=>A("dateTo",w.target.value),className:"velohub-input"})]})]}),u.jsxs("div",{className:"report-actions",children:[u.jsxs("button",{onClick:R,className:"velohub-btn",disabled:o,children:[u.jsx(yr,{sx:{fontSize:"1rem",mr:1}}),o?"Gerando relatÃ³rio...":"Gerar RelatÃ³rio com IA"]}),e&&u.jsxs(u.Fragment,{children:[u.jsxs("button",{onClick:E,className:"velohub-btn secondary",disabled:n,children:[u.jsx(wt,{sx:{fontSize:"1rem",mr:1}}),n?"Gerando PDF...":"Baixar PDF"]}),u.jsxs("button",{onClick:y,className:"velohub-btn secondary",disabled:a,children:[u.jsx(wt,{sx:{fontSize:"1rem",mr:1}}),a?"Gerando Word...":"Baixar Word"]})]})]}),o&&u.jsx("div",{className:"loading-message",children:u.jsx("p",{children:"Consultor de CX analisando dados..."})}),e&&!o&&u.jsx("div",{className:"report-content",children:u.jsx("div",{className:"markdown-content",dangerouslySetInnerHTML:{__html:e.split(`
`).map(w=>w.startsWith("# ")?`<h1>${w.substring(2)}</h1>`:w.startsWith("## ")?`<h2>${w.substring(3)}</h2>`:w.startsWith("### ")?`<h3>${w.substring(4)}</h3>`:w.startsWith("- ")?`<li>${w.substring(2)}</li>`:w.trim()===""?"<br/>":`<p>${w}</p>`).join("")}})})]})};function ia(){const[e,t]=I.useState("tabulation"),[o,r]=I.useState(null),[n,s]=I.useState([]),a=[{id:"tabulation",label:"Entrada de Dados"},{id:"dashboard",label:"Dashboard"},{id:"feed",label:"Feed de Atendimento"},{id:"reports",label:"RelatÃ³rios"}],i=d=>{r(d),t("feed")};return u.jsxs("div",{className:"app",children:[u.jsx("div",{className:"tabs-container",children:u.jsx("div",{className:"tabs-wrapper",children:a.map(d=>u.jsx("button",{className:`tab-button ${e===d.id?"active":""}`,onClick:()=>t(d.id),"aria-selected":e===d.id,children:d.label},d.id))})}),u.jsxs("main",{className:"main-content",children:[e==="tabulation"&&u.jsx(ss,{}),e==="dashboard"&&u.jsx(us,{onWordClick:i,setWordCloudWords:s}),e==="feed"&&u.jsx(gs,{selectedWord:o,wordCloudWords:n}),e==="reports"&&u.jsx(aa,{})]})]})}pr.createRoot(document.getElementById("root")).render(u.jsx(I.StrictMode,{children:u.jsx(ia,{})}));
