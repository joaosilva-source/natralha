# Render.com Configuration - VeloHub
# VERSION: v3.0.0 | DATE: 2026-01-30 | AUTHOR: VeloHub Development Team
# Serviço Unificado: Backend + Frontend (mesmo domínio)

services:
  # Serviço Unificado - Backend serve Frontend
  - type: web
    name: velohub-backend
    env: node
    region: oregon
    plan: starter
    # Build: instalar dependências do backend E compilar frontend
    buildCommand: npm install --legacy-peer-deps && npm run build:frontend
    startCommand: npm start
    rootDir: .
    envVars:
      - key: NODE_ENV
        value: production
      - key: PORT
        value: 8080
    healthCheckPath: /api/health
    autoDeploy: true
